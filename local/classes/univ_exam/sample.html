<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏàòÌïô Î¨∏Ï†ú ÌïôÏäµ ÏãúÏä§ÌÖú</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* ÏßÑÌñâÎ•† Î∞î */
        .progress-bar-container {
            background-color: #fff;
            padding: 15px 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .problem-counter {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            min-width: 120px;
        }
        
        .progress-bar {
            flex: 1;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            width: 0%;
        }
        
        .score-display {
            font-size: 16px;
            color: #666;
            min-width: 100px;
            text-align: right;
        }
        
        /* ÏßàÎ¨∏ Ïπ¥Ïö¥ÌÑ∞ */
        .question-counter {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f0f0f0;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .question-icon {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        
        .question-count {
            font-weight: bold;
            color: #FF6B6B;
        }
        
        /* Î¨∏Ï†ú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò */
        .problem-nav {
            background-color: #fff;
            padding: 10px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .nav-button {
            padding: 6px 12px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .nav-button:hover:not(:disabled) {
            background: #f5f5f5;
            border-color: #999;
        }
        
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .nav-button.complete {
            background: #e8f5e9;
            border-color: #4CAF50;
            color: #2e7d32;
        }
        
        .nav-button.current {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        
        /* Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà - Ìà¨ ÏπºÎüº Î†àÏù¥ÏïÑÏõÉ */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        /* Ï¢åÏ∏° ÏπºÎüº - Î¨∏Ï†ú Ï†ïÎ≥¥ */
        .left-column {
            width: 40%;
            background: white;
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .problem-section {
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .problem-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .problem-description {
            font-size: 16px;
            line-height: 1.6;
            color: #495057;
            margin-bottom: 15px;
        }
        
        .problem-box {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            position: relative;
        }
        
        .equation {
            margin: 10px 0;
            font-size: 18px;
            color: #495057;
            position: relative;
        }
        
        /* 1Îì±Í∏â ÏãúÏÑ† ÏÑπÏÖò */
        .insight-section {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            flex: 1;
            overflow-y: auto;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .insight-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 13px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }
        
        .insight-button:hover {
            background-color: #45a049;
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .eye-icon {
            width: 16px;
            height: 16px;
        }
        
        #insightList {
            margin-top: 10px;
        }
        
        .insight-item {
            margin-bottom: 12px;
            padding: 10px;
            background-color: white;
            border-radius: 4px;
            border-left: 3px solid #4CAF50;
            font-size: 14px;
            opacity: 0;
            transform: translateY(10px);
            animation: slideIn 0.5s forwards;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }
        
        .insight-text {
            flex: 1;
            line-height: 1.4;
        }
        
        .insight-text.typing::after {
            content: '|';
            animation: blink 0.8s infinite;
            color: #4CAF50;
            font-weight: bold;
        }
        
        .insight-number {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            line-height: 20px;
            border-radius: 50%;
            font-size: 12px;
            flex-shrink: 0;
        }
        
        /* 1Îì±Í∏â ÏßàÎ¨∏ ÏÑπÏÖò */
        .creative-section {
            padding: 20px;
            background: white;
            overflow-y: auto;
            display: none;
        }
        
        .creative-section.active {
            display: block;
        }
        
        /* Ïö∞Ï∏° ÏπºÎüº - Ìï¥ÏÑ§ */
        .right-column {
            flex: 1;
            background: white;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .solution-container {
            flex: 1;
            padding: 20px 30px;
            overflow-y: auto;
            position: relative;
        }
        
        #explanationArea {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .explanation-step {
            margin: 20px 0;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        
        .question {
            color: #007bff;
            font-size: 20px;
            font-weight: bold;
            margin: 20px 0;
            position: relative;
        }
        
        .thinking-indicator {
            display: inline-block;
            margin-left: 10px;
            color: #999;
            font-size: 16px;
            font-weight: normal;
        }
        
        .thinking-indicator::after {
            content: '';
            animation: dots 1.5s infinite;
        }
        
        .answer {
            color: #333;
            font-size: 18px;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .next-button {
            background-color: transparent;
            color: #999;
            border: none;
            padding: 15px 0;
            font-size: 14px;
            cursor: pointer;
            margin: 20px auto;
            transition: all 0.3s;
            width: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border-bottom: 1px solid #e0e0e0;
            position: relative;
        }
        
        .next-button:hover {
            color: #666;
            border-bottom-color: #999;
        }
        
        .next-button:disabled {
            color: #e0e0e0;
            cursor: not-allowed;
            border-bottom-color: #f0f0f0;
        }
        
        .arrow-down {
            display: inline-block;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid currentColor;
            transition: transform 0.3s;
        }
        
        .next-button:hover .arrow-down {
            transform: translateY(2px);
        }
        
        /* ÌïòÏù¥ÎùºÏù¥Ìä∏ ÎßàÌÅ¨ */
        .highlight-mark {
            background-color: rgba(255, 235, 59, 0);
            transition: background-color 0.5s ease-in-out;
            padding: 2px 4px;
            border-radius: 2px;
            position: relative;
            display: inline-block;
        }
        
        .highlight-mark.active {
            background-color: rgba(255, 235, 59, 0.2);
            animation: pulse 0.5s;
        }
        
        .highlight-mark.active::after {
            content: attr(data-insight);
            position: absolute;
            right: -16px;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(76, 175, 80, 0.08);
            color: rgba(76, 175, 80, 0.7);
            padding: 0px 4px;
            font-size: 9px;
            font-weight: normal;
            opacity: 0;
            animation: fadeInSubtle 0.5s forwards;
            z-index: 10;
            pointer-events: none;
            border-radius: 0 8px 8px 0;
            border: 1px solid rgba(76, 175, 80, 0.15);
            border-left: none;
            line-height: 1.2;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .highlight-mark.active::before {
            content: '';
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
            border-right: 6px solid rgba(76, 175, 80, 0.08);
            opacity: 0;
            animation: fadeInSubtle 0.5s forwards;
            z-index: 9;
        }
        
        /* Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ Ïä§ÌÉÄÏùº */
        .creative-questions {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #dee2e6;
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: fadeInUp 0.6s ease-out forwards;
            animation-delay: 0.3s;
        }
        
        .creative-questions::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .creative-loading {
            text-align: center;
            padding: 40px 0;
        }
        
        .thinking-dots {
            margin-top: 20px;
            font-size: 16px;
            color: #666;
        }
        
        .dots-animation {
            display: inline-block;
            width: 30px;
            text-align: left;
            animation: dots 1.5s infinite;
        }
        
        .creative-title {
            font-size: 20px;
            font-weight: bold;
            color: #667eea;
            display: block;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .creative-question {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
            opacity: 0;
        }
        
        .creative-question::after {
            content: '‚Üí';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            color: #667eea;
            opacity: 0;
            transition: all 0.3s;
        }
        
        .creative-question:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
            border-color: #667eea;
        }
        
        .creative-question:hover::after {
            opacity: 0.5;
            right: 15px;
        }
        
        .q-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 15px;
            font-size: 16px;
        }
        
        .q-text {
            font-size: 16px;
            color: #333;
            line-height: 1.6;
            display: inline-block;
            width: calc(100% - 60px);
            vertical-align: middle;
        }
        
        .q-text.generating {
            color: #999;
            font-style: italic;
        }
        
        .generating-text {
            color: #999;
            font-style: italic;
        }
        
        .generating-dots {
            display: inline-block;
            width: 20px;
            text-align: left;
            animation: dots 1s infinite;
        }
        
        .q-hint {
            margin-top: 10px;
            margin-left: 50px;
            padding: 10px 15px;
            background: #f0f7ff;
            border-radius: 8px;
            font-size: 14px;
            color: #0066cc;
            border-left: 3px solid #0066cc;
            opacity: 0;
        }
        
        .creative-footer {
            text-align: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px dashed #dee2e6;
            font-size: 16px;
            color: #666;
        }
        
        /* ÏßàÎ¨∏ Í∞ÄÎä•Ìïú ÏöîÏÜå Ïä§ÌÉÄÏùº */
        .questionable {
            position: relative;
            cursor: help;
            transition: background-color 0.3s;
        }
        
        .questionable:hover {
            background-color: rgba(255, 235, 59, 0.2);
            border-radius: 4px;
            padding: 2px 4px;
            margin: -2px -4px;
        }
        
        /* ÏßàÎ¨∏ Î™©Î°ù ÌåùÏóÖ */
        .question-popup {
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 10px;
            z-index: 1000;
            display: none;
            min-width: 200px;
            max-width: 300px;
        }
        
        .question-popup.active {
            display: block;
        }
        
        .question-item {
            padding: 8px 12px;
            margin: 4px 0;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .question-item:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateX(5px);
        }
        
        .question-item-icon {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }
        
        /* Í∏∞ÌÉÄ Ïä§ÌÉÄÏùº */
        .highlight {
            background-color: rgba(255, 235, 59, 0.4);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .important {
            color: #d32f2f;
            font-weight: bold;
            font-size: 20px;
        }
        
        .final-emphasis {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .typing {
            display: inline;
            border-right: 2px solid #333;
            animation: blink 0.8s infinite;
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s infinite;
        }
        
        /* Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
        
        @keyframes fadeInSubtle {
            0% { opacity: 0; transform: translateY(-50%) translateX(5px); }
            100% { opacity: 0.6; transform: translateY(-50%) translateX(0); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.01); }
            100% { transform: scale(1); }
        }
        
        @keyframes blink {
            0%, 50% { border-color: #333; }
            51%, 100% { border-color: transparent; }
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
        
        @keyframes fadeInSimple {
            from { opacity: 0; }
            to { opacity: 0.8; }
        }
        
        /* ÌôîÏù¥Ìä∏Î≥¥Îìú Ïä§ÌÉÄÏùº */
        .whiteboard-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: white;
            opacity: 0;
            visibility: hidden;
            transition: all 0.8s ease;
            display: flex;
            flex-direction: column;
            z-index: 1000;
        }
        
        .whiteboard-container.active {
            opacity: 1;
            visibility: visible;
        }
        
        body.evaluation-mode {
            overflow: hidden;
        }
        
        body.evaluation-mode .progress-bar-container,
        body.evaluation-mode .problem-nav,
        body.evaluation-mode .main-container {
            display: none;
        }
        
        .whiteboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .close-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            color: white;
        }
        
        .close-button:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .answer-selection {
            background: rgba(255,255,255,0.15);
            padding: 15px 20px;
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .answer-selection label {
            font-size: 18px;
            font-weight: bold;
        }
        
        .answer-dropdown {
            background: white;
            color: #333;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            min-width: 150px;
            transition: all 0.3s;
        }
        
        .answer-dropdown:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .answer-dropdown:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255,255,255,0.5);
        }
        
        .whiteboard-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .whiteboard-question {
            font-size: 18px;
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 12px;
            margin-top: 10px;
            line-height: 1.6;
        }
        
        .whiteboard-tools {
            background: #f8f9fa;
            padding: 15px 40px;
            display: flex;
            gap: 15px;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex-wrap: wrap;
            border-bottom: 1px solid #e9ecef;
        }
        
        .tool-button {
            background: white;
            border: 2px solid #dee2e6;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .tool-button:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .tool-button.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .color-picker {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .color-picker:hover {
            transform: scale(1.1);
        }
        
        .thickness-slider {
            width: 100px;
        }
        
        .canvas-wrapper {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #fafafa;
        }
        
        #whiteboardCanvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: crosshair;
            background: white;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.02);
        }
        
        .submit-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        
        /* Ï†ÑÌôò Î©îÏãúÏßÄ */
        .transition-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            z-index: 999;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .transition-message.active {
            opacity: 1;
            visibility: visible;
        }
        
        .transition-icon {
            font-size: 60px;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .transition-text {
            font-size: 24px;
            color: #667eea;
            font-weight: bold;
        }
        
        /* Ï±ÑÏ†ê Í≤∞Í≥º ÌåùÏóÖ Ïä§ÌÉÄÏùº */
        .result-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            display: none;
            z-index: 2001;
            text-align: center;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .result-popup.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .result-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .result-popup-overlay.active {
            opacity: 1;
        }
        
        .result-popup-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }
        
        .result-popup-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .result-popup-score {
            font-size: 18px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .result-popup-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .result-popup-button {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .result-popup-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .result-popup-button.secondary {
            background: #f0f0f0;
            color: #666;
        }
        
        .result-popup-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        /* Ìï¥ÏÑ§ ÌåùÏóÖ Ïä§ÌÉÄÏùº */
        .solution-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            display: none;
            z-index: 2003;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .solution-popup.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .solution-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            z-index: 2002;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .solution-popup-overlay.active {
            opacity: 1;
        }
        
        .solution-popup-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .solution-popup-title {
            font-size: 28px;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .solution-popup-content {
            line-height: 1.8;
            color: #333;
        }
        
        .solution-step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }
        
        .solution-step-title {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .solution-step-content {
            font-size: 16px;
            color: #555;
        }
        
        .solution-answer-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-top: 20px;
        }
        
        .solution-close-button {
            display: block;
            margin: 30px auto 0;
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .solution-close-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        
        /* Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº */
        .next-problem-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s;
            display: none;
            z-index: 900;
        }
        
        .next-problem-button.active {
            display: block;
        }
        
        .next-problem-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        
        /* ÏßàÎ¨∏ Í∏∞Î°ù Ìå®ÎÑê */
        .question-history-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        .question-history-panel.minimized {
            width: 60px;
            height: 60px;
            cursor: pointer;
        }
        
        .question-history-panel.expanded {
            width: 350px;
            max-height: 400px;
        }
        
        .question-history-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            position: relative;
        }
        
        .question-history-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #4CAF50;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .question-history-content {
            display: none;
            padding: 20px;
            max-height: 340px;
            overflow-y: auto;
        }
        
        .question-history-panel.expanded .question-history-content {
            display: block;
        }
        
        .question-history-panel.expanded .question-history-icon {
            display: none;
        }
        
        .question-history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .question-history-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        
        .question-history-close {
            width: 30px;
            height: 30px;
            border: none;
            background: #f0f0f0;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .question-history-close:hover {
            background: #e0e0e0;
        }
        
        .question-record {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 3px solid #FF6B6B;
        }
        
        .question-record-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .question-record-content {
            color: #666;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .question-record-time {
            color: #999;
            font-size: 11px;
            margin-top: 5px;
        }
        
        /* ÏùåÏÑ± Ïû¨ÏÉù Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ */
        .voice-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 20px 40px;
            border-radius: 30px;
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 2000;
        }
        
        .voice-indicator.active {
            display: flex;
        }
        
        .voice-wave {
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        .voice-bar {
            width: 3px;
            background: white;
            border-radius: 3px;
            animation: wave 0.5s ease-in-out infinite;
        }
        
        .voice-bar:nth-child(1) { height: 10px; animation-delay: 0s; }
        .voice-bar:nth-child(2) { height: 20px; animation-delay: 0.1s; }
        .voice-bar:nth-child(3) { height: 15px; animation-delay: 0.2s; }
        .voice-bar:nth-child(4) { height: 25px; animation-delay: 0.3s; }
        .voice-bar:nth-child(5) { height: 18px; animation-delay: 0.4s; }
        
        @keyframes wave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }
        
        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 1024px) {
            .left-column {
                width: 50%;
            }
        }
        
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .left-column {
                width: 100%;
                height: 40vh;
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .right-column {
                height: 60vh;
            }
            
            .creative-question {
                padding: 15px;
            }
            
            .q-text {
                font-size: 14px;
                width: calc(100% - 50px);
            }
            
            .q-number {
                width: 30px;
                height: 30px;
                line-height: 30px;
                font-size: 14px;
                margin-right: 10px;
            }
            
            .q-hint {
                margin-left: 40px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <!-- ÏßÑÌñâÎ•† Î∞î -->
    <div class="progress-bar-container">
        <div class="problem-counter">Î¨∏Ï†ú <span id="currentProblem">1</span> / <span id="totalProblems">20</span></div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="score-display">Ï†êÏàò: <span id="totalScore">0</span>Ï†ê</div>
        <div class="question-counter">
            <div class="question-icon">?</div>
            <span>ÏßàÎ¨∏ Í∞ÄÎä•: <span class="question-count" id="remainingQuestions">10</span>Í∞ú</span>
        </div>
    </div>
    
    <!-- Î¨∏Ï†ú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
    <div class="problem-nav" id="problemNav">
        <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
    </div>
    
    <!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="main-container">
        <!-- Ï¢åÏ∏° ÏπºÎüº -->
        <div class="left-column">
            <!-- Î¨∏Ï†ú ÏÑπÏÖò -->
            <div class="problem-section">
                <h2 class="problem-title" id="problemTitle">Î¨∏Ï†ú</h2>
                <p class="problem-description" id="problemDescription"></p>
                <div class="problem-box" id="problemBox">
                    <div id="conditionsArea"></div>
                </div>
            </div>
            
            <!-- 1Îì±Í∏â ÏãúÏÑ† ÏÑπÏÖò -->
            <div class="insight-section" id="insightSection">
                <div class="section-header">
                    <h3 class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 5C7 5 2.73 8.11 1 12.5C2.73 16.89 7 20 12 20C17 20 21.27 16.89 23 12.5C21.27 8.11 17 5 12 5ZM12 17.5C9.24 17.5 7 15.26 7 12.5C7 9.74 9.24 7.5 12 7.5C14.76 7.5 17 9.74 17 12.5C17 15.26 14.76 17.5 12 17.5ZM12 9.5C10.34 9.5 9 10.84 9 12.5C9 14.16 10.34 15.5 12 15.5C13.66 15.5 15 14.16 15 12.5C15 10.84 13.66 9.5 12 9.5Z"/>
                        </svg>
                        1Îì±Í∏â ÏãúÏÑ†
                    </h3>
                    <button class="insight-button" id="insightButton">
                        Î¨∏Ï†ú Î∂ÑÏÑù ÏãúÏûë
                    </button>
                </div>
                <div id="insightList"></div>
            </div>
            
            <!-- 1Îì±Í∏â ÏßàÎ¨∏ ÏÑπÏÖò -->
            <div class="creative-section" id="creativeSection">
                <div class="section-header">
                    <h3 class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="#667eea">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                        </svg>
                        1Îì±Í∏â Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏
                    </h3>
                </div>
                <div id="creativeQuestionsList"></div>
            </div>
        </div>
        
        <!-- Ïö∞Ï∏° ÏπºÎüº -->
        <div class="right-column">
            <div class="solution-container" id="solutionContainer">
                <div id="explanationArea"></div>
                <button class="next-button" id="nextButton"><span class="arrow-down"></span></button>
            </div>
        </div>
    </div>
    
    <!-- Ï†ÑÌôò Î©îÏãúÏßÄ -->
    <div class="transition-message" id="transitionMessage">
        <div class="transition-icon">‚úçÔ∏è</div>
        <div class="transition-text">ÏÑúÏà†ÌèâÍ∞ÄÎ•º ÏãúÏûëÌï©ÎãàÎã§</div>
    </div>
    
    <!-- ÌôîÏù¥Ìä∏Î≥¥Îìú Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="whiteboard-container" id="whiteboardContainer">
        <div class="whiteboard-header">
            <button class="close-button" id="closeButton" title="Ï¢ÖÎ£å">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
            <div class="whiteboard-title">üìù ÏÑúÏà†Ìòï ÌèâÍ∞Ä</div>
            <div class="whiteboard-question" id="similarProblemDescription">
                Îã§Ïùå Î¨∏Ï†úÎ•º ÌíÄÍ≥†, ÌíÄÏù¥ Í≥ºÏ†ïÏùÑ ÏûêÏÑ∏Ìûà ÏûëÏÑ±ÌïòÏÑ∏Ïöî:<br>
                <strong>Î¨∏Ï†ú:</strong> <span id="similarProblemText"></span>
            </div>
            <div class="answer-selection">
                <label for="answerSelect">Ï†ïÎãµ ÏÑ†ÌÉù:</label>
                <select id="answerSelect" class="answer-dropdown">
                    <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                </select>
            </div>
        </div>
        <div class="whiteboard-tools">
            <button class="tool-button active" id="penTool">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Ìéú
            </button>
            <button class="tool-button" id="eraserTool">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M15.14 3.63L12.37 6.4l4.24 4.24 2.77-2.77c.59-.59.59-1.54 0-2.12l-2.12-2.12c-.58-.59-1.53-.59-2.12 0zM11 7.83L3.41 15.41c-.78.78-.78 2.05 0 2.83l2.83 2.83c.78.78 2.05.78 2.83 0L16.66 13.48 11 7.83z"/>
                </svg>
                ÏßÄÏö∞Í∞ú
            </button>
            <button class="tool-button" id="clearTool">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
                Ï†ÑÏ≤¥ ÏßÄÏö∞Í∏∞
            </button>
            <div style="display: flex; align-items: center; gap: 10px;">
                <label style="font-size: 14px;">ÏÉâÏÉÅ:</label>
                <input type="color" class="color-picker" id="colorPicker" value="#000000">
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <label style="font-size: 14px;">ÍµµÍ∏∞:</label>
                <input type="range" class="thickness-slider" id="thicknessSlider" min="1" max="20" value="2">
                <span id="thicknessValue">2</span>
            </div>
        </div>
        <div class="canvas-wrapper">
            <canvas id="whiteboardCanvas"></canvas>
            <button class="submit-button" id="submitButton">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
                Ï†úÏ∂úÌïòÍ∏∞
            </button>
        </div>
    </div>
    
    <!-- Ï±ÑÏ†ê Í≤∞Í≥º ÌåùÏóÖ -->
    <div class="result-popup-overlay" id="resultOverlay"></div>
    <div class="result-popup" id="resultPopup">
        <div class="result-popup-icon" id="resultIcon"></div>
        <div class="result-popup-title" id="resultTitle"></div>
        <div class="result-popup-score" id="resultScore"></div>
        <div class="result-popup-buttons">
            <button class="result-popup-button secondary" onclick="closeResultPopup()">Îã´Í∏∞</button>
            <button class="result-popup-button primary" onclick="showSolution()">Ìï¥ÏÑ§ Î≥¥Í∏∞</button>
        </div>
    </div>
    
    <!-- Ìï¥ÏÑ§ ÌåùÏóÖ -->
    <div class="solution-popup-overlay" id="solutionOverlay"></div>
    <div class="solution-popup" id="solutionPopup">
        <div class="solution-popup-header">
            <h2 class="solution-popup-title">üìö Î¨∏Ï†ú Ìï¥ÏÑ§</h2>
        </div>
        <div class="solution-popup-content" id="solutionContent">
            <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
        </div>
        <button class="solution-close-button" onclick="closeSolution()">Îã´Í∏∞</button>
    </div>
    
    <!-- Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº -->
    <button class="next-problem-button" id="nextProblemButton" onclick="nextProblem()">Îã§Ïùå Î¨∏Ï†úÎ°ú ‚Üí</button>
    
    <!-- ÏßàÎ¨∏ ÌåùÏóÖ -->
    <div class="question-popup" id="questionPopup"></div>
    
    <!-- ÏùåÏÑ± Ïû¨ÏÉù Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ -->
    <div class="voice-indicator" id="voiceIndicator">
        <div class="voice-wave">
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
            <div class="voice-bar"></div>
        </div>
        <span>ÏùåÏÑ± ÏÑ§Î™Ö Ïû¨ÏÉù Ï§ë...</span>
    </div>
    
    <!-- ÏßàÎ¨∏ Í∏∞Î°ù Ìå®ÎÑê -->
    <div class="question-history-panel minimized" id="questionHistoryPanel">
        <div class="question-history-icon" onclick="toggleQuestionHistory()">
            ‚ùì
            <div class="question-history-badge" id="questionHistoryBadge" style="display: none;">0</div>
        </div>
        <div class="question-history-content">
            <div class="question-history-header">
                <h3 class="question-history-title">ÏßàÎ¨∏ Í∏∞Î°ù</h3>
                <button class="question-history-close" onclick="toggleQuestionHistory()">‚úï</button>
            </div>
            <div id="questionHistoryList"></div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Ìï®ÏàòÎì§ÏùÑ Î®ºÏ†Ä Ï†ïÏùò
        function closeResultPopup() {
            const overlay = document.getElementById('resultOverlay');
            const popup = document.getElementById('resultPopup');
            
            if (overlay && overlay.classList) {
                overlay.classList.remove('active');
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 300);
            }
            
            if (popup && popup.classList) {
                popup.classList.remove('active');
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }
        }
        
        function showSolution() {
            closeResultPopup();
            const solutionOverlay = document.getElementById('solutionOverlay');
            const solutionPopup = document.getElementById('solutionPopup');
            
            if (solutionOverlay) {
                solutionOverlay.style.display = 'block';
                setTimeout(() => {
                    if (solutionOverlay.classList) {
                        solutionOverlay.classList.add('active');
                    }
                }, 10);
            }
            
            if (solutionPopup) {
                solutionPopup.style.display = 'block';
                setTimeout(() => {
                    if (solutionPopup.classList) {
                        solutionPopup.classList.add('active');
                    }
                }, 10);
            }
        }
        
        function closeSolution() {
            const solutionOverlay = document.getElementById('solutionOverlay');
            const solutionPopup = document.getElementById('solutionPopup');
            
            if (solutionOverlay && solutionOverlay.classList) {
                solutionOverlay.classList.remove('active');
                setTimeout(() => {
                    solutionOverlay.style.display = 'none';
                }, 300);
            }
            
            if (solutionPopup && solutionPopup.classList) {
                solutionPopup.classList.remove('active');
                setTimeout(() => {
                    solutionPopup.style.display = 'none';
                }, 300);
            }
        }
        
        function checkAnswer(userAnswer) {
            const correctAnswer = currentProblemData.similarProblemAnswer;
            const isCorrect = userAnswer === correctAnswer;
            
            // Í≤∞Í≥º ÌåùÏóÖ ÌëúÏãú
            const overlay = document.getElementById('resultOverlay');
            const popup = document.getElementById('resultPopup');
            const icon = document.getElementById('resultIcon');
            const title = document.getElementById('resultTitle');
            const score = document.getElementById('resultScore');
            
            if (!overlay || !popup || !icon || !title || !score) {
                alert('Ï±ÑÏ†ê Í≤∞Í≥ºÎ•º ÌëúÏãúÌï† Ïàò ÏóÜÏäµÎãàÎã§. ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            
            // Ïú†ÏÇ¨Î¨∏Ï†ú Ìï¥ÏÑ§ ÎÇ¥Ïö© ÏóÖÎç∞Ïù¥Ìä∏
            updateSimilarProblemSolution();
            
            // ÌåùÏóÖ ÌëúÏãú
            overlay.style.display = 'block';
            popup.style.display = 'block';
            
            // Ïï†ÎãàÎ©îÏù¥ÏÖòÏùÑ ÏúÑÌïú ÏßÄÏó∞
            setTimeout(() => {
                if (overlay && overlay.classList) {
                    overlay.classList.add('active');
                }
                if (popup && popup.classList) {
                    popup.classList.add('active');
                }
            }, 10);
            
            if (isCorrect) {
                icon.innerHTML = 'üéâ';
                icon.style.color = '#4CAF50';
                title.textContent = 'Ï†ïÎãµÏûÖÎãàÎã§!';
                score.textContent = '100Ï†ê ÌöçÎìù! Î¨∏Ï†úÎ•º ÏôÑÎ≤ΩÌïòÍ≤å Ïù¥Ìï¥ÌïòÏÖ®ÎÑ§Ïöî.';
                
                // Ï†êÏàò Ï∂îÍ∞Ä
                totalScore += 100;
                updateScore();
                
                // Î¨∏Ï†ú ÏôÑÎ£å ÌëúÏãú
                problemsCompleted[currentProblemIndex] = true;
                updateProblemNav();
                
                // Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº ÌëúÏãú
                showNextProblemButton();
            } else {
                icon.innerHTML = 'üò¢';
                icon.style.color = '#f44336';
                title.textContent = 'ÏïÑÏâ¨ÏõåÏöî!';
                score.textContent = `ÏÑ†ÌÉùÌïòÏã† Îãµ: ${userAnswer} (Ï†ïÎãµ: ${correctAnswer})`;
            }
        }
        
        // Ï†ÑÏó≠ Ìï®ÏàòÎì§ÏùÑ window Í∞ùÏ≤¥Ïóê Ï¶âÏãú Îì±Î°ù
        window.closeResultPopup = closeResultPopup;
        window.showSolution = showSolution;
        window.closeSolution = closeSolution;
        window.checkAnswer = checkAnswer;
        
        // ÏßàÎ¨∏ Í¥ÄÎ†® Î≥ÄÏàòÎì§
        let remainingQuestions = 10;
        let questionHistory = [];
        let currentQuestionPopup = null;
        
        // ÏßàÎ¨∏ Í¥ÄÎ†® Ìï®ÏàòÎì§
        function updateQuestionCounter() {
            document.getElementById('remainingQuestions').textContent = remainingQuestions;
        }
        
        function addQuestionableElements() {
            // Î¨∏Ï†ú ÏÑ§Î™Ö, Ï°∞Í±¥Îì§Ïóê ÏßàÎ¨∏ Í∞ÄÎä•Ìïú ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
            const elements = document.querySelectorAll('.equation, .highlight-mark, .answer span');
            elements.forEach(el => {
                if (!el.classList.contains('questionable')) {
                    el.classList.add('questionable');
                    el.addEventListener('mouseenter', showQuestionPopup);
                    el.addEventListener('mouseleave', hideQuestionPopup);
                    el.addEventListener('click', handleQuestionClick);
                }
            });
        }
        
        function showQuestionPopup(e) {
            if (remainingQuestions <= 0) return;
            
            const target = e.currentTarget;
            const rect = target.getBoundingClientRect();
            const popup = document.getElementById('questionPopup');
            
            // ÏßàÎ¨∏ ÏòµÏÖò ÏÉùÏÑ±
            const questions = getQuestionsForElement(target);
            popup.innerHTML = questions.map((q, i) => `
                <div class="question-item" data-question-index="${i}">
                    <svg class="question-item-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                    </svg>
                    ${q}
                </div>
            `).join('');
            
            // ÌåùÏóÖ ÏúÑÏπò ÏÑ§Ï†ï
            popup.style.left = rect.left + 'px';
            popup.style.top = (rect.bottom + 5) + 'px';
            popup.classList.add('active');
            
            currentQuestionPopup = {
                element: target,
                questions: questions
            };
        }
        
        function hideQuestionPopup() {
            setTimeout(() => {
                const popup = document.getElementById('questionPopup');
                if (!popup.matches(':hover')) {
                    popup.classList.remove('active');
                    currentQuestionPopup = null;
                }
            }, 100);
        }
        
        function handleQuestionClick(e) {
            if (remainingQuestions <= 0) {
                alert('Ïò§ÎäòÏùò ÏßàÎ¨∏ ÌöüÏàòÎ•º Î™®Îëê ÏÇ¨Ïö©ÌñàÏäµÎãàÎã§.');
                return;
            }
            
            const questionItem = e.target.closest('.question-item');
            if (!questionItem) return;
            
            const questionIndex = parseInt(questionItem.dataset.questionIndex);
            const question = currentQuestionPopup.questions[questionIndex];
            const elementText = currentQuestionPopup.element.textContent;
            
            // ÏßàÎ¨∏ ÌöüÏàò Ï∞®Í∞ê
            remainingQuestions--;
            updateQuestionCounter();
            
            // ÏßàÎ¨∏ Í∏∞Î°ùÏóê Ï∂îÍ∞Ä
            addQuestionToHistory(question, elementText);
            
            // ÌåùÏóÖ Îã´Í∏∞
            document.getElementById('questionPopup').classList.remove('active');
            
            // ÏùåÏÑ± ÏÑ§Î™Ö Ïû¨ÏÉù
            playVoiceExplanation(question, elementText);
        }
        
        function getQuestionsForElement(element) {
            const text = element.textContent.toLowerCase();
            const questions = [];
            
            // ÏàòÏãù Í¥ÄÎ†® ÏßàÎ¨∏
            if (text.includes('¬≥') || text.includes('¬≤')) {
                questions.push('Ïù¥ ÏßÄÏàòÎäî Î¨¥ÏóáÏùÑ ÏùòÎØ∏ÌïòÎÇòÏöî?');
                questions.push('Ïôú Ïù¥Îü∞ Ï∞®ÏàòÏùò ÏãùÏù¥ ÎÇòÏôîÎÇòÏöî?');
            }
            
            if (text.includes('=')) {
                questions.push('Ïù¥ Îì±ÏãùÏùÄ Ïñ¥Îñ§ ÏùòÎØ∏Ïù∏Í∞ÄÏöî?');
                questions.push('Ïôú ÏñëÎ≥ÄÏù¥ Í∞ôÏïÑÏïº ÌïòÎÇòÏöî?');
            }
            
            if (text.includes('+') || text.includes('-')) {
                questions.push('Ïù¥ Ïó∞ÏÇ∞Ïùò ÏùòÎØ∏Îäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?');
                questions.push('Îã§Î•∏ Î∞©Î≤ïÏúºÎ°ú Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÎÇòÏöî?');
            }
            
            // Ï°∞Í±¥ Í¥ÄÎ†® ÏßàÎ¨∏
            if (element.classList.contains('equation')) {
                questions.push('Ïù¥ Ï°∞Í±¥Ïù¥ Ïôú ÌïÑÏöîÌïúÍ∞ÄÏöî?');
                questions.push('Ïù¥ Ï°∞Í±¥ÏóêÏÑú Ï£ºÎ™©Ìï¥Ïïº Ìï† Ï†êÏùÄ?');
            }
            
            // ÏùºÎ∞òÏ†ÅÏù∏ ÏßàÎ¨∏ Ï∂îÍ∞Ä
            questions.push('Ïù¥ Î∂ÄÎ∂ÑÏùÑ Îçî ÏûêÏÑ∏Ìûà ÏÑ§Î™ÖÌï¥Ï£ºÏÑ∏Ïöî');
            questions.push('Îã§Î•∏ ÏòàÏãúÎ°ú ÏÑ§Î™ÖÌï¥Ï£ºÏÑ∏Ïöî');
            
            return questions;
        }
        
        function addQuestionToHistory(question, context) {
            const record = {
                question: question,
                context: context,
                time: new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' }),
                problemTitle: currentProblemData.title
            };
            
            questionHistory.push(record);
            updateQuestionHistoryDisplay();
            
            // Î∞∞ÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
            const badge = document.getElementById('questionHistoryBadge');
            badge.textContent = questionHistory.length;
            badge.style.display = 'block';
        }
        
        function updateQuestionHistoryDisplay() {
            const historyList = document.getElementById('questionHistoryList');
            historyList.innerHTML = questionHistory.map((record, index) => `
                <div class="question-record">
                    <div class="question-record-title">${record.problemTitle} - ${record.context.substring(0, 20)}...</div>
                    <div class="question-record-content">${record.question}</div>
                    <div class="question-record-time">${record.time}</div>
                </div>
            `).reverse().join('');
        }
        
        function toggleQuestionHistory() {
            const panel = document.getElementById('questionHistoryPanel');
            panel.classList.toggle('minimized');
            panel.classList.toggle('expanded');
        }
        
        window.toggleQuestionHistory = toggleQuestionHistory;
        
        function playVoiceExplanation(question, context) {
            // ÏùåÏÑ± Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ ÌëúÏãú
            const indicator = document.getElementById('voiceIndicator');
            indicator.classList.add('active');
            
            // ÏÑ§Î™Ö ÌÖçÏä§Ìä∏ ÏÉùÏÑ±
            const explanation = generateExplanation(question, context);
            
            // Web Speech API ÏÇ¨Ïö©
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(explanation);
                utterance.lang = 'ko-KR';
                utterance.rate = 0.9;
                utterance.pitch = 1.1;
                
                utterance.onend = () => {
                    indicator.classList.remove('active');
                };
                
                speechSynthesis.speak(utterance);
            } else {
                // ÏùåÏÑ± Ìï©ÏÑ±ÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Í≤ΩÏö∞
                setTimeout(() => {
                    indicator.classList.remove('active');
                    alert(`ÏÑ§Î™Ö: ${explanation}`);
                }, 2000);
            }
        }
        
        function generateExplanation(question, context) {
            // ÏßàÎ¨∏Í≥º Î¨∏Îß•Ïóê Îî∞Îùº Ï†ÅÏ†àÌïú ÏÑ§Î™Ö ÏÉùÏÑ±
            const explanations = {
                'Ïù¥ ÏßÄÏàòÎäî Î¨¥ÏóáÏùÑ ÏùòÎØ∏ÌïòÎÇòÏöî?': `${context}ÏóêÏÑú ÏßÄÏàòÎäî Í±∞Îì≠Ï†úÍ≥±ÏùÑ ÎÇòÌÉÄÎÉÖÎãàÎã§. ÏòàÎ•º Îì§Ïñ¥ x¬≤Îäî xÍ≥±ÌïòÍ∏∞ xÎ•º ÏùòÎØ∏ÌïòÍ≥†, x¬≥Îäî xÎ•º ÏÑ∏ Î≤à Í≥±Ìïú Í≤ÉÏûÖÎãàÎã§.`,
                'Ïôú Ïù¥Îü∞ Ï∞®ÏàòÏùò ÏãùÏù¥ ÎÇòÏôîÎÇòÏöî?': `Ïù¥ Î¨∏Ï†úÏóêÏÑúÎäî ÏÇºÏ∞®Î∞©Ï†ïÏãùÏùÑ Îã§Î£®Í≥† ÏûàÏäµÎãàÎã§. ÏÑ∏ Í∞úÏùò Í∑ºÏùÑ Í∞ÄÏßÄÎØÄÎ°ú ÏÑ∏ Í∞úÏùò Î≥ÄÏàòÎ•º Íµ¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.`,
                'Ïù¥ Îì±ÏãùÏùÄ Ïñ¥Îñ§ ÏùòÎØ∏Ïù∏Í∞ÄÏöî?': `Ïù¥ Îì±ÏãùÏùÄ Ï¢åÎ≥ÄÍ≥º Ïö∞Î≥ÄÏù¥ Í∞ôÎã§Îäî Í≤ÉÏùÑ ÎÇòÌÉÄÎÉÖÎãàÎã§. Î¨∏Ï†úÏóêÏÑú Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥ÏùÑ ÎßåÏ°±Ìï¥Ïïº Ìï©ÎãàÎã§.`,
                'Ïù¥ Ï°∞Í±¥Ïù¥ Ïôú ÌïÑÏöîÌïúÍ∞ÄÏöî?': `Ïù¥ Ï°∞Í±¥ÏùÄ Î¨∏Ï†úÎ•º ÌíÄÍ∏∞ ÏúÑÌïú ÌïµÏã¨ Ï†ïÎ≥¥ÏûÖÎãàÎã§. Ïó¨Îü¨ Ï°∞Í±¥ÏùÑ Ï°∞Ìï©ÌïòÏó¨ ÎØ∏ÏßÄÏàòÎ•º Íµ¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.`,
                'Ïù¥ Î∂ÄÎ∂ÑÏùÑ Îçî ÏûêÏÑ∏Ìûà ÏÑ§Î™ÖÌï¥Ï£ºÏÑ∏Ïöî': `${context}Îäî Ïù¥ Î¨∏Ï†úÏùò Ï§ëÏöîÌïú Î∂ÄÎ∂ÑÏûÖÎãàÎã§. Ï∞®Í∑ºÏ∞®Í∑º Î∂ÑÏÑùÌïòÎ©¥ Ìå®ÌÑ¥ÏùÑ Î∞úÍ≤¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.`
            };
            
            return explanations[question] || `${context}Ïóê ÎåÄÌïú ÏÑ§Î™Ö: Ïù¥ Î∂ÄÎ∂ÑÏùÄ Î¨∏Ï†ú Ìï¥Í≤∞Ïùò Ï§ëÏöîÌïú Îã®ÏÑúÏûÖÎãàÎã§. Îã§Î•∏ Ï°∞Í±¥Îì§Í≥º Ïó∞Í≤∞ÌïòÏó¨ ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî.`;
        }
        
        // ÏßàÎ¨∏ ÌåùÏóÖÏóê ÎßàÏö∞Ïä§ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä
        document.getElementById('questionPopup').addEventListener('mouseenter', () => {
            currentQuestionPopup = currentQuestionPopup; // Ïú†ÏßÄ
        });
        
        document.getElementById('questionPopup').addEventListener('mouseleave', () => {
            document.getElementById('questionPopup').classList.remove('active');
            currentQuestionPopup = null;
        });
        
        // DOMÏù¥ ÏôÑÏ†ÑÌûà Î°úÎìúÎêú ÌõÑ Ï¥àÍ∏∞Ìôî
        window.addEventListener('load', function() {
            // ÌåùÏóÖÎì§Ïù¥ Ï¥àÍ∏∞ÏóêÎäî Ïà®Í≤®Ï†∏ ÏûàÎäîÏßÄ ÌôïÏù∏
            const resultOverlay = document.getElementById('resultOverlay');
            const resultPopup = document.getElementById('resultPopup');
            const solutionOverlay = document.getElementById('solutionOverlay');
            const solutionPopup = document.getElementById('solutionPopup');
            
            if (resultOverlay) resultOverlay.style.display = 'none';
            if (resultPopup) resultPopup.style.display = 'none';
            if (solutionOverlay) solutionOverlay.style.display = 'none';
            if (solutionPopup) solutionPopup.style.display = 'none';
            
            // ÏßàÎ¨∏ Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
            updateQuestionCounter();
        });
        
        // Ï†ÑÏó≠ Î≥ÄÏàòÎì§
        let problemsData = null;
        let currentProblemIndex = 0;
        let currentProblemData = null;
        let totalScore = 0;
        let problemsCompleted = [];
        let currentStep = -1;
        let isTyping = false;
        let insightStep = 0;
        let insightInterval;
        let isInsightActive = false;
        let autoNextTimeout;
        
        // ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ (Ïã§Ï†úÎ°úÎäî Î≥ÑÎèÑ JSON ÌååÏùºÏóêÏÑú Î°úÎìú)
        const sampleData = {
            "problems": [
                {
                    "id": 1,
                    "title": "ÎåÄÏπ≠Ïãù Î¨∏Ï†ú",
                    "problemInfo": {
                        "description": "ÏÑ∏ Ïã§Ïàò a, b, cÍ∞Ä Îã§Ïùå Ï°∞Í±¥ÏùÑ Î™®Îëê ÎßåÏ°±ÏãúÌÇ¨ Îïå, abcÏùò Í∞íÏùÑ Íµ¨ÌïòÏó¨Îùº.",
                        "conditions": [
                            "(Í∞Ä) a¬≥ - 5a¬≤ + 2a + 33 = a¬≤ + b¬≤ + c¬≤",
                            "(ÎÇò) b¬≥ - 5b¬≤ + 2b + 33 = a¬≤ + b¬≤ + c¬≤",
                            "(Îã§) c¬≥ - 5c¬≤ + 2c + 33 = a¬≤ + b¬≤ + c¬≤"
                        ]
                    },
                    "analysisInfo": [
                        "Î≥ÄÏàòÏùò Í∞úÏàòÏôÄ Ï¢ÖÎ•ò ÌååÏïÖ ‚Üí ÏÑ∏ Í∞úÏùò ÎØ∏ÏßÄÏàò",
                        "Ï°∞Í±¥Ïùò ÏôÑÏ†ÑÏÑ± ÌôïÏù∏ ‚Üí 'Î™®Îëê' ÎßåÏ°±Ìï¥Ïïº Ìï®",
                        "Î™©Ìëú Î™ÖÌôïÌûà ÌïòÍ∏∞ ‚Üí abcÏùò Í∞í Íµ¨ÌïòÍ∏∞",
                        "Ï¢åÎ≥ÄÏùò Í≥µÌÜµ Íµ¨Ï°∞ Î∞úÍ≤¨ ‚Üí ÎèôÏùºÌïú Ìå®ÌÑ¥!",
                        "Ïö∞Î≥ÄÏù¥ Î™®Îëê Í∞ôÏùå ‚Üí ÌïµÏã¨ Îã®ÏÑú Î∞úÍ≤¨!"
                    ],
                    "highlightTags": [
                        { "text": "ÏÑ∏ Ïã§Ïàò a, b, c", "insightNumber": 1 },
                        { "text": "Îã§Ïùå Ï°∞Í±¥ÏùÑ Î™®Îëê ÎßåÏ°±ÏãúÌÇ¨ Îïå", "insightNumber": 2 },
                        { "text": "abcÏùò Í∞í", "insightNumber": 3 },
                        { "text": "a¬≥ - 5a¬≤ + 2a + 33", "insightNumber": 4 },
                        { "text": "b¬≥ - 5b¬≤ + 2b + 33", "insightNumber": 4 },
                        { "text": "c¬≥ - 5c¬≤ + 2c + 33", "insightNumber": 4 },
                        { "text": "a¬≤ + b¬≤ + c¬≤", "insightNumber": 5 }
                    ],
                    "solutionSteps": [
                        {
                            "question": "ü§î Ïù¥ Î¨∏Ï†úÏóêÏÑú Í∞ÄÏû• Î®ºÏ†Ä Ï£ºÎ™©Ìï¥Ïïº Ìï† ÌäπÏßïÏùÄ Î¨¥ÏóáÏùºÍπåÏöî?",
                            "answer": "ÏÑ∏ Í∞úÏùò Ï°∞Í±¥ (Í∞Ä), (ÎÇò), (Îã§)Î•º ÏûêÏÑ∏Ìûà Î≥¥Î©¥...\n\nÎ™®Îëê Ïö∞Î≥ÄÏù¥ <span class='highlight'>a¬≤ + b¬≤ + c¬≤</span>Î°ú Í∞ôÎã§Îäî Í≤ÉÏùÑ Î∞úÍ≤¨Ìï† Ïàò ÏûàÏäµÎãàÎã§!\n\nÏù¥Í≤ÉÏùÄ Îß§Ïö∞ Ï§ëÏöîÌïú Îã®ÏÑúÏûÖÎãàÎã§. ÏÑ∏ ÏãùÏùò Ï¢åÎ≥ÄÏù¥ Î™®Îëê Í∞ôÏùÄ Í∞íÏù¥ÎùºÎäî ÏùòÎØ∏Ï£†."
                        },
                        {
                            "question": "üí° Í∑∏Î†áÎã§Î©¥ ÏÑ∏ ÏãùÏùò Ï¢åÎ≥ÄÏùÑ Ïñ¥ÎñªÍ≤å Ï†ïÎ¶¨Ìï† Ïàò ÏûàÏùÑÍπåÏöî?",
                            "answer": "Ï°∞Í±¥ (Í∞Ä)ÏóêÏÑú: a¬≥ - 5a¬≤ + 2a + 33 = (a¬≤ + b¬≤ + c¬≤)\nÏ°∞Í±¥ (ÎÇò)ÏóêÏÑú: b¬≥ - 5b¬≤ + 2b + 33 = (a¬≤ + b¬≤ + c¬≤)\nÏ°∞Í±¥ (Îã§)ÏóêÏÑú: c¬≥ - 5c¬≤ + 2c + 33 = (a¬≤ + b¬≤ + c¬≤)\n\nÎî∞ÎùºÏÑú <span class='highlight'>a¬≥ - 5a¬≤ + 2a + 33 = b¬≥ - 5b¬≤ + 2b + 33 = c¬≥ - 5c¬≤ + 2c + 33</span>\n\nÏù¥Í≤ÉÏùÄ a, b, cÍ∞Ä Î™®Îëê Í∞ôÏùÄ ÌòïÌÉúÏùò ÏãùÏùÑ ÎßåÏ°±ÌïúÎã§Îäî ÎúªÏûÖÎãàÎã§!"
                        },
                        {
                            "question": "üéØ a, b, cÍ∞Ä ÎßåÏ°±ÌïòÎäî Í≥µÌÜµ Î∞©Ï†ïÏãùÏùÑ Ï∞æÏïÑÎ≥ºÍπåÏöî?",
                            "answer": "xÏóê ÎåÄÌïú ÏÇºÏ∞®Î∞©Ï†ïÏãùÏùÑ ÏÑ∏ÏõåÎ≥¥Î©¥:\n\n<span class='highlight'>x¬≥ - 5x¬≤ + 2x + 33 = (a¬≤ + b¬≤ + c¬≤)</span>\n\nÏù¥ Î∞©Ï†ïÏãùÏùò ÏÑ∏ Í∑ºÏù¥ Î∞îÎ°ú a, b, cÏûÖÎãàÎã§!\n\nÏù¥Î•º Ï†ïÎ¶¨ÌïòÎ©¥:\nx¬≥ - 5x¬≤ + 2x + 33 - (a¬≤ + b¬≤ + c¬≤) = 0"
                        },
                        {
                            "question": "üìê ÏÇºÏ∞®Î∞©Ï†ïÏãùÏùò Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥ÑÎ•º ÌôúÏö©Ìï¥Î≥ºÍπåÏöî?",
                            "answer": "ÏÇºÏ∞®Î∞©Ï†ïÏãù x¬≥ + px¬≤ + qx + r = 0Ïùò ÏÑ∏ Í∑ºÏùÑ Œ±, Œ≤, Œ≥Îùº ÌïòÎ©¥:\n\n‚Ä¢ Œ± + Œ≤ + Œ≥ = -p\n‚Ä¢ Œ±Œ≤ + Œ≤Œ≥ + Œ≥Œ± = q\n‚Ä¢ Œ±Œ≤Œ≥ = -r\n\nÏö∞Î¶¨ Î∞©Ï†ïÏãùÏóêÏÑúÎäî ÏµúÍ≥†Ï∞® Í≥ÑÏàòÍ∞Ä 1Ïù¥ÎØÄÎ°ú:\n‚Ä¢ <span class='highlight'>a + b + c = 5</span>\n‚Ä¢ <span class='highlight'>ab + bc + ca = 2</span>\n‚Ä¢ <span class='highlight'>abc = -33 + (a¬≤ + b¬≤ + c¬≤)</span>"
                        },
                        {
                            "question": "üîç Ïù¥Ï†ú abcÎ•º Íµ¨ÌïòÍ∏∞ ÏúÑÌï¥ (a¬≤ + b¬≤ + c¬≤)Ïùò Í∞íÏùÑ Ï∞æÏïÑÏïº Ìï©ÎãàÎã§. Ïñ¥ÎñªÍ≤å Íµ¨Ìï†ÍπåÏöî?",
                            "answer": "Ìï≠Îì±ÏãùÏùÑ Ïù¥Ïö©Ìï©ÎãàÎã§!\n\n(a + b + c)¬≤ = a¬≤ + b¬≤ + c¬≤ + 2(ab + bc + ca)\n\nÏïåÍ≥† ÏûàÎäî Í∞íÏùÑ ÎåÄÏûÖÌïòÎ©¥:\n5¬≤ = (a¬≤ + b¬≤ + c¬≤) + 2 √ó 2\n25 = (a¬≤ + b¬≤ + c¬≤) + 4\n\nÎî∞ÎùºÏÑú <span class='highlight'>a¬≤ + b¬≤ + c¬≤ = 21</span>"
                        },
                        {
                            "question": "‚ú® ÎìúÎîîÏñ¥ ÎßàÏßÄÎßâ Îã®Í≥Ñ! abcÏùò Í∞íÏùÄ?",
                            "answer": "ÏïûÏÑú Íµ¨Ìïú Í¥ÄÍ≥ÑÏãùÏóêÏÑú:\nabc = -33 + (a¬≤ + b¬≤ + c¬≤)\n\n(a¬≤ + b¬≤ + c¬≤) = 21ÏùÑ ÎåÄÏûÖÌïòÎ©¥:\n\nabc = -33 + 21\n<span class='important'>abc = -12</span>\n\nÎî∞ÎùºÏÑú ÎãµÏùÄ <span class='important'>-12</span>ÏûÖÎãàÎã§!"
                        },
                        {
                            "question": "üìù Ïù¥ Î¨∏Ï†úÏùò ÌïµÏã¨ Ìè¨Ïù∏Ìä∏Î•º Ï†ïÎ¶¨Ìï¥Î≥ºÍπåÏöî?",
                            "answer": "<div class='final-emphasis'>\n<span class='important'>üéì Ïù¥ Î¨∏Ï†úÏóêÏÑú Íº≠ Í∏∞ÏñµÌï¥Ïïº Ìï† ÌïµÏã¨ ÏïÑÏù¥ÎîîÏñ¥:</span>\n\n1Ô∏è‚É£ <span class='highlight'>Í≥µÌÜµÎêú Ïö∞Î≥ÄÏùÑ Î∞úÍ≤¨</span>ÌïòÏó¨ ÏÑ∏ Î≥ÄÏàòÍ∞Ä Í∞ôÏùÄ Î∞©Ï†ïÏãùÏùò Í∑ºÏûÑÏùÑ ÌååÏïÖ\n\n2Ô∏è‚É£ <span class='highlight'>ÎåÄÏπ≠ÏÑ±</span>ÏùÑ Ïù¥Ïö©ÌïòÏó¨ Î¨∏Ï†úÎ•º Îã®ÏàúÌôî\n\n3Ô∏è‚É£ <span class='highlight'>Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥Ñ</span>Î•º ÌôúÏö©ÌïòÏó¨ ÎØ∏ÏßÄÏàòÎì§ ÏÇ¨Ïù¥Ïùò Í¥ÄÍ≥ÑÏãù Ïú†ÎèÑ\n\n4Ô∏è‚É£ <span class='highlight'>Ìï≠Îì±Ïãù (a+b+c)¬≤ = a¬≤+b¬≤+c¬≤ + 2(ab+bc+ca)</span>ÏùÑ Ïù¥Ïö©Ìïú Í≥ÑÏÇ∞\n\nüí° <span class='important'>Í∞ÄÏû• Ï§ëÏöîÌïú Í≤ÉÏùÄ 'Ìå®ÌÑ¥ Ïù∏Ïãù'ÏûÖÎãàÎã§!</span>\nÏÑ∏ Ï°∞Í±¥Ïù¥ ÎèôÏùºÌïú Íµ¨Ï°∞Î•º Í∞ÄÏßÑÎã§Îäî Í≤ÉÏùÑ Î∞úÍ≤¨ÌïòÎäî ÏàúÍ∞Ñ,\nÎ¨∏Ï†úÎäî Ìõ®Ïî¨ Í∞ÑÎã®Ìï¥ÏßëÎãàÎã§.\n</div>"
                        }
                    ],
                    "creativeQuestions": {
                        "title": "üí≠ Ïù¥ Î¨∏Ï†úÎ•º Îçî ÍπäÏù¥ Ïù¥Ìï¥ÌïòÍ∏∞ ÏúÑÌïú Ïã¨Ìôî ÏßàÎ¨∏Îì§:",
                        "questions": [
                            {
                                "text": "ÎßåÏïΩ Ï°∞Í±¥ÏóêÏÑú Ïö∞Î≥ÄÏù¥ <span class='highlight'>a¬≤ + b¬≤ + c¬≤</span>Í∞Ä ÏïÑÎãàÎùº <span class='highlight'>ab + bc + ca</span>ÏòÄÎã§Î©¥ Ïñ¥ÎñªÍ≤å Ï†ëÍ∑ºÌï¥Ïïº Ìï†ÍπåÏöî?",
                                "hint": "Ïù¥ Í≤ΩÏö∞ÏóêÎèÑ ÏÑ∏ Î≥ÄÏàòÍ∞Ä Í∞ôÏùÄ Î∞©Ï†ïÏãùÏùò Í∑ºÏù¥ ÎêòÏßÄÎßå, Í≥ÑÏÇ∞ Í≥ºÏ†ïÏù¥ Îã¨ÎùºÏßëÎãàÎã§."
                            },
                            {
                                "text": "Ïù¥ Î¨∏Ï†úÎ•º ÏùºÎ∞òÌôîÌïòÏó¨ <span class='highlight'>nÍ∞úÏùò Î≥ÄÏàò</span>Ïóê ÎåÄÌïú Î¨∏Ï†úÎ°ú ÌôïÏû•Ìï† Ïàò ÏûàÏùÑÍπåÏöî?",
                                "hint": "nÏ∞® Î∞©Ï†ïÏãùÏùò Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥ÑÎ•º ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî."
                            },
                            {
                                "text": "Ïã§Ï†úÎ°ú a, b, cÏùò Íµ¨Ï≤¥Ï†ÅÏù∏ Í∞íÎì§ÏùÑ Íµ¨Ìï† Ïàò ÏûàÏùÑÍπåÏöî? Í∑∏ Í∞íÎì§ ÏÇ¨Ïù¥ÏóêÎäî Ïñ¥Îñ§ Í¥ÄÍ≥ÑÍ∞Ä ÏûàÏùÑÍπåÏöî?",
                                "hint": "ÏÇºÏ∞®Î∞©Ï†ïÏãùÏùÑ ÏßÅÏ†ë ÌíÄÏñ¥Î≥¥Í≥†, Í∑ºÎì§Ïùò ÎåÄÏπ≠ÏÑ±ÏùÑ Í¥ÄÏ∞∞Ìï¥Î≥¥ÏÑ∏Ïöî."
                            }
                        ],
                        "footer": "üöÄ Ïù¥Îü∞ ÏßàÎ¨∏Îì§ÏùÑ Ïä§Ïä§Î°ú ÎßåÎì§Ïñ¥ÎÇ¥Îäî Í≤ÉÏù¥ <span class='important'>ÏàòÌïôÏ†Å ÏÇ¨Í≥†Î†•</span>ÏùÑ Í∏∞Î•¥Îäî ÌïµÏã¨ÏûÖÎãàÎã§!"
                    },
                    "keyPoints": [
                        "Í≥µÌÜµÎêú Ïö∞Î≥ÄÏùÑ Î∞úÍ≤¨ÌïòÏó¨ ÏÑ∏ Î≥ÄÏàòÍ∞Ä Í∞ôÏùÄ Î∞©Ï†ïÏãùÏùò Í∑ºÏûÑÏùÑ ÌååÏïÖ",
                        "ÎåÄÏπ≠ÏÑ±ÏùÑ Ïù¥Ïö©ÌïòÏó¨ Î¨∏Ï†úÎ•º Îã®ÏàúÌôî",
                        "Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥ÑÎ•º ÌôúÏö©ÌïòÏó¨ ÎØ∏ÏßÄÏàòÎì§ ÏÇ¨Ïù¥Ïùò Í¥ÄÍ≥ÑÏãù Ïú†ÎèÑ",
                        "Ìï≠Îì±Ïãù (a+b+c)¬≤ = a¬≤+b¬≤+c¬≤ + 2(ab+bc+ca)ÏùÑ Ïù¥Ïö©Ìïú Í≥ÑÏÇ∞"
                    ],
                    "similarProblem": {
                        "description": "ÏÑ∏ Ïã§Ïàò x, y, zÍ∞Ä x¬≥-4x¬≤+x+15 = y¬≥-4y¬≤+y+15 = z¬≥-4z¬≤+z+15 = x¬≤+y¬≤+z¬≤Î•º ÎßåÏ°±Ìï† Îïå, xyzÏùò Í∞íÏùÑ Íµ¨ÌïòÏãúÏò§.",
                        "options": [
                            { "value": 1, "text": "‚ë† 1" },
                            { "value": 0, "text": "‚ë° 0" },
                            { "value": -1, "text": "‚ë¢ -1" },
                            { "value": -2, "text": "‚ë£ -2" },
                            { "value": 2, "text": "‚ë§ 2" }
                        ]
                    },
                    "similarProblemAnswer": -1,
                    "similarProblemSolution": {
                        "steps": [
                            {
                                "title": "1Îã®Í≥Ñ: Ìå®ÌÑ¥ Î∞úÍ≤¨",
                                "content": "ÏÑ∏ ÏãùÏùò Ïö∞Î≥ÄÏù¥ Î™®Îëê <strong>x¬≤ + y¬≤ + z¬≤</strong>Î°ú Í∞ôÎã§Îäî Í≤ÉÏùÑ Î∞úÍ≤¨Ìï©ÎãàÎã§.<br>Ïù¥Îäî x, y, zÍ∞Ä Í∞ôÏùÄ Î∞©Ï†ïÏãùÏùò ÏÑ∏ Í∑ºÏûÑÏùÑ ÏùòÎØ∏Ìï©ÎãàÎã§."
                            },
                            {
                                "title": "2Îã®Í≥Ñ: Î∞©Ï†ïÏãù ÏÑ∏Ïö∞Í∏∞",
                                "content": "t¬≥ - 4t¬≤ + t + 15 = x¬≤ + y¬≤ + z¬≤<br>Ïù¥ Î∞©Ï†ïÏãùÏùò ÏÑ∏ Í∑ºÏù¥ x, y, zÏûÖÎãàÎã§."
                            },
                            {
                                "title": "3Îã®Í≥Ñ: Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥Ñ",
                                "content": "‚Ä¢ x + y + z = 4<br>‚Ä¢ xy + yz + zx = 1<br>‚Ä¢ xyz = -(15 - (x¬≤ + y¬≤ + z¬≤))"
                            },
                            {
                                "title": "4Îã®Í≥Ñ: x¬≤ + y¬≤ + z¬≤ Í≥ÑÏÇ∞",
                                "content": "(x + y + z)¬≤ = x¬≤ + y¬≤ + z¬≤ + 2(xy + yz + zx)<br>16 = x¬≤ + y¬≤ + z¬≤ + 2<br>Îî∞ÎùºÏÑú <strong>x¬≤ + y¬≤ + z¬≤ = 14</strong>"
                            }
                        ],
                        "finalAnswer": "xyz = -(15 - 14) = -1"
                    }
                },
                {
                    "id": 2,
                    "title": "Ïù¥Ï∞®Î∞©Ï†ïÏãùÏùò Í∑ºÍ≥º Í≥ÑÏàò",
                    "problemInfo": {
                        "description": "Ïù¥Ï∞®Î∞©Ï†ïÏãù x¬≤ - 2x + k = 0Ïùò Îëê Í∑ºÏù¥ Œ±, Œ≤Ïùº Îïå, Œ±¬≤ + Œ≤¬≤ = 10ÏùÑ ÎßåÏ°±ÌïòÎäî ÏÉÅÏàò kÏùò Í∞íÏùÑ Íµ¨ÌïòÏó¨Îùº.",
                        "conditions": []
                    },
                    "analysisInfo": [
                        "Ïù¥Ï∞®Î∞©Ï†ïÏãùÏùò Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥Ñ ÌôïÏù∏",
                        "Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥ Œ±¬≤ + Œ≤¬≤ = 10 ÌååÏïÖ",
                        "Î™©Ìëú: ÏÉÅÏàò kÏùò Í∞í Íµ¨ÌïòÍ∏∞",
                        "Ìï≠Îì±Ïãù ÌôúÏö© ÌïÑÏöîÏÑ± Ïù∏ÏßÄ"
                    ],
                    "highlightTags": [
                        { "text": "x¬≤ - 2x + k = 0", "insightNumber": 1 },
                        { "text": "Îëê Í∑ºÏù¥ Œ±, Œ≤", "insightNumber": 2 },
                        { "text": "Œ±¬≤ + Œ≤¬≤ = 10", "insightNumber": 3 },
                        { "text": "ÏÉÅÏàò kÏùò Í∞í", "insightNumber": 4 }
                    ],
                    "solutionSteps": [
                        {
                            "question": "ü§î Ïù¥Ï∞®Î∞©Ï†ïÏãùÏùò Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥ÑÎäî Î¨¥ÏóáÏùºÍπåÏöî?",
                            "answer": "Ïù¥Ï∞®Î∞©Ï†ïÏãù x¬≤ - 2x + k = 0ÏóêÏÑú:\n\n‚Ä¢ Îëê Í∑ºÏùò Ìï©: <span class='highlight'>Œ± + Œ≤ = 2</span>\n‚Ä¢ Îëê Í∑ºÏùò Í≥±: <span class='highlight'>Œ±Œ≤ = k</span>\n\nÏù¥Í≤ÉÏù¥ ÎπÑÏóêÌÉÄÏùò Í≥µÏãùÏûÖÎãàÎã§!"
                        },
                        {
                            "question": "üí° Œ±¬≤ + Œ≤¬≤Î•º Ïñ¥ÎñªÍ≤å ÌëúÌòÑÌï† Ïàò ÏûàÏùÑÍπåÏöî?",
                            "answer": "Ìï≠Îì±ÏãùÏùÑ Ïù¥Ïö©Ìï©ÎãàÎã§:\n\n<span class='highlight'>(Œ± + Œ≤)¬≤ = Œ±¬≤ + 2Œ±Œ≤ + Œ≤¬≤</span>\n\nÎî∞ÎùºÏÑú:\nŒ±¬≤ + Œ≤¬≤ = (Œ± + Œ≤)¬≤ - 2Œ±Œ≤"
                        },
                        {
                            "question": "üéØ Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥Ïóê ÎåÄÏûÖÌï¥Î≥ºÍπåÏöî?",
                            "answer": "Œ±¬≤ + Œ≤¬≤ = 10Ïù¥Í≥†,\nŒ± + Œ≤ = 2, Œ±Œ≤ = kÏù¥ÎØÄÎ°ú:\n\n10 = 2¬≤ - 2k\n10 = 4 - 2k\n\nÎî∞ÎùºÏÑú <span class='highlight'>2k = -6</span>"
                        },
                        {
                            "question": "‚ú® kÏùò Í∞íÏùÄ?",
                            "answer": "2k = -6ÏóêÏÑú:\n\n<span class='important'>k = -3</span>\n\nÎî∞ÎùºÏÑú ÏÉÅÏàò kÏùò Í∞íÏùÄ <span class='important'>-3</span>ÏûÖÎãàÎã§!"
                        }
                    ],
                    "creativeQuestions": {
                        "title": "üí≠ Ïù¥ Î¨∏Ï†úÎ•º Îçî ÍπäÏù¥ Ïù¥Ìï¥ÌïòÍ∏∞ ÏúÑÌïú Ïã¨Ìôî ÏßàÎ¨∏Îì§:",
                        "questions": [
                            {
                                "text": "ÌåêÎ≥ÑÏãù D = 4 - 4kÎ•º Í≥ÑÏÇ∞ÌïòÎ©¥ Ïñ¥Îñ§ ÏùòÎØ∏Í∞Ä ÏûàÏùÑÍπåÏöî? <span class='highlight'>k = -3</span>Ïùº Îïå Í∑ºÏùò ÏÑ±ÏßàÏùÄ?",
                                "hint": "D > 0Ïù¥Î©¥ ÏÑúÎ°ú Îã§Î•∏ Îëê Ïã§Í∑º, D = 0Ïù¥Î©¥ Ï§ëÍ∑º, D < 0Ïù¥Î©¥ ÌóàÍ∑ºÏûÖÎãàÎã§."
                            },
                            {
                                "text": "ÎßåÏïΩ Ï°∞Í±¥Ïù¥ <span class='highlight'>Œ±¬≥ + Œ≤¬≥ = 28</span>Ïù¥ÏóàÎã§Î©¥ Ïñ¥ÎñªÍ≤å ÌíÄÏñ¥Ïïº Ìï†ÍπåÏöî?",
                                "hint": "a¬≥ + b¬≥ = (a + b)¬≥ - 3ab(a + b) Í≥µÏãùÏùÑ ÌôúÏö©Ìï¥Î≥¥ÏÑ∏Ïöî."
                            },
                            {
                                "text": "Ïù¥Ï∞®Î∞©Ï†ïÏãùÏùò Îëê Í∑º Œ±, Œ≤ÏôÄ Í≥ÑÏàòÎì§ ÏÇ¨Ïù¥Ïùò Í∏∞ÌïòÌïôÏ†Å ÏùòÎØ∏Îäî Î¨¥ÏóáÏùºÍπåÏöî?",
                                "hint": "Ìè¨Î¨ºÏÑ† y = x¬≤ - 2x + kÏôÄ xÏ∂ïÏùò ÍµêÏ†êÏùÑ ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî."
                            }
                        ],
                        "footer": "üöÄ Ïù¥Îü∞ ÏßàÎ¨∏Îì§ÏùÑ Ïä§Ïä§Î°ú ÎßåÎì§Ïñ¥ÎÇ¥Îäî Í≤ÉÏù¥ <span class='important'>ÏàòÌïôÏ†Å ÏÇ¨Í≥†Î†•</span>ÏùÑ Í∏∞Î•¥Îäî ÌïµÏã¨ÏûÖÎãàÎã§!"
                    },
                    "keyPoints": [
                        "Ïù¥Ï∞®Î∞©Ï†ïÏãùÏùò Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥Ñ (ÎπÑÏóêÌÉÄÏùò Í≥µÏãù)",
                        "Ìï≠Îì±Ïãù (Œ± + Œ≤)¬≤ = Œ±¬≤ + 2Œ±Œ≤ + Œ≤¬≤ ÌôúÏö©",
                        "Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥ÏùÑ Ïù¥Ïö©Ìïú Î∞©Ï†ïÏãù ÏàòÎ¶Ω"
                    ],
                    "similarProblem": {
                        "description": "Ïù¥Ï∞®Î∞©Ï†ïÏãù x¬≤ - 6x + m = 0Ïùò Îëê Í∑ºÏù¥ p, qÏùº Îïå, p¬≤ + q¬≤ = 20ÏùÑ ÎßåÏ°±ÌïòÎäî ÏÉÅÏàò mÏùò Í∞íÏùÑ Íµ¨ÌïòÏãúÏò§.",
                        "options": [
                            { "value": 6, "text": "‚ë† 6" },
                            { "value": 7, "text": "‚ë° 7" },
                            { "value": 8, "text": "‚ë¢ 8" },
                            { "value": 9, "text": "‚ë£ 9" },
                            { "value": 10, "text": "‚ë§ 10" }
                        ]
                    },
                    "similarProblemAnswer": 8,
                    "similarProblemSolution": {
                        "steps": [
                            {
                                "title": "1Îã®Í≥Ñ: Í∑ºÍ≥º Í≥ÑÏàòÏùò Í¥ÄÍ≥Ñ",
                                "content": "p + q = 6, pq = m"
                            },
                            {
                                "title": "2Îã®Í≥Ñ: Ìï≠Îì±Ïãù Ï†ÅÏö©",
                                "content": "p¬≤ + q¬≤ = (p + q)¬≤ - 2pq = 36 - 2m"
                            },
                            {
                                "title": "3Îã®Í≥Ñ: Ï°∞Í±¥ ÎåÄÏûÖ",
                                "content": "20 = 36 - 2m<br>2m = 16"
                            }
                        ],
                        "finalAnswer": "m = 8"
                    }
                }
            ]
        };
        
        // 20Î¨∏Ï†úÎ°ú ÌôïÏû• (ÎçîÎØ∏ Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä)
        for (let i = 3; i <= 20; i++) {
            sampleData.problems.push({
                "id": i,
                "title": `Î¨∏Ï†ú ${i}`,
                "problemInfo": {
                    "description": `Ïù¥Í≤ÉÏùÄ ${i}Î≤àÏß∏ Î¨∏Ï†úÏûÖÎãàÎã§. Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥ÏùÑ ÎßåÏ°±ÌïòÎäî Í∞íÏùÑ Íµ¨ÌïòÏãúÏò§.`,
                    "conditions": ["Ï°∞Í±¥ 1", "Ï°∞Í±¥ 2", "Ï°∞Í±¥ 3"]
                },
                "analysisInfo": ["Î∂ÑÏÑù 1", "Î∂ÑÏÑù 2", "Î∂ÑÏÑù 3"],
                "highlightTags": [
                    { "text": "Ï£ºÏñ¥ÏßÑ Ï°∞Í±¥", "insightNumber": 1 }
                ],
                "solutionSteps": [
                    {
                        "question": "Î¨∏Ï†úÎ•º Ïñ¥ÎñªÍ≤å Ï†ëÍ∑ºÌï†ÍπåÏöî?",
                        "answer": "Îã®Í≥ÑÎ≥ÑÎ°ú Ï∞®Í∑ºÏ∞®Í∑º Ï†ëÍ∑ºÌï©ÎãàÎã§."
                    },
                    {
                        "question": "ÌïµÏã¨ Ìè¨Ïù∏Ìä∏Îäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
                        "answer": "Ïù¥ Î¨∏Ï†úÏùò ÌïµÏã¨ÏùÄ Ï°∞Í±¥ÏùÑ Ïûò ÌååÏïÖÌïòÎäî Í≤ÉÏûÖÎãàÎã§."
                    }
                ],
                "creativeQuestions": {
                    "title": "üí≠ Ïù¥ Î¨∏Ï†úÎ•º Îçî ÍπäÏù¥ Ïù¥Ìï¥ÌïòÍ∏∞ ÏúÑÌïú Ïã¨Ìôî ÏßàÎ¨∏Îì§:",
                    "questions": [
                        {
                            "text": "Ïù¥ Î¨∏Ï†úÏùò Ï°∞Í±¥ÏùÑ Îã§Î•¥Í≤å Î≥ÄÌòïÌïúÎã§Î©¥?",
                            "hint": "Ï°∞Í±¥Ïùò Î≥ÄÌôîÍ∞Ä Í≤∞Í≥ºÏóê ÎØ∏ÏπòÎäî ÏòÅÌñ•ÏùÑ ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî."
                        },
                        {
                            "text": "Îã§Î•∏ Ï†ëÍ∑º Î∞©Î≤ïÏùÄ ÏóÜÏùÑÍπåÏöî?",
                            "hint": "Ïó¨Îü¨ Í¥ÄÏ†êÏóêÏÑú Î¨∏Ï†úÎ•º Î∞îÎùºÎ≥¥ÏÑ∏Ïöî."
                        },
                        {
                            "text": "Ïù¥ Î¨∏Ï†úÏùò ÏùºÎ∞òÌôîÎäî Í∞ÄÎä•Ìï†ÍπåÏöî?",
                            "hint": "ÌäπÏàòÌïú Í≤ΩÏö∞ÏóêÏÑú ÏùºÎ∞òÏ†ÅÏù∏ Í≤ΩÏö∞Î°ú ÌôïÏû•Ìï¥Î≥¥ÏÑ∏Ïöî."
                        }
                    ],
                    "footer": "üöÄ Ïù¥Îü∞ ÏßàÎ¨∏Îì§ÏùÑ Ïä§Ïä§Î°ú ÎßåÎì§Ïñ¥ÎÇ¥Îäî Í≤ÉÏù¥ <span class='important'>ÏàòÌïôÏ†Å ÏÇ¨Í≥†Î†•</span>ÏùÑ Í∏∞Î•¥Îäî ÌïµÏã¨ÏûÖÎãàÎã§!"
                },
                "keyPoints": ["ÌïµÏã¨ Ìè¨Ïù∏Ìä∏ 1"],
                "similarProblem": {
                    "description": "Ïú†ÏÇ¨ Î¨∏Ï†úÏûÖÎãàÎã§.",
                    "options": [
                        { "value": 1, "text": "‚ë† 1" },
                        { "value": 2, "text": "‚ë° 2" },
                        { "value": 3, "text": "‚ë¢ 3" },
                        { "value": 4, "text": "‚ë£ 4" },
                        { "value": 5, "text": "‚ë§ 5" }
                    ]
                },
                "similarProblemAnswer": 3,
                "similarProblemSolution": {
                    "steps": [{ "title": "ÌíÄÏù¥", "content": "ÌíÄÏù¥ Í≥ºÏ†ï" }],
                    "finalAnswer": "Ï†ïÎãµ: 3"
                }
            });
        }
        
        // Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        function loadProblemsData() {
            // Ïã§Ï†úÎ°úÎäî fetch APIÎ°ú JSON ÌååÏùºÏùÑ Î°úÎìú
            // fetch('problems.json').then(response => response.json()).then(data => {...});
            
            // Ïó¨Í∏∞ÏÑúÎäî ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
            problemsData = sampleData;
            problemsCompleted = new Array(problemsData.problems.length).fill(false);
            
            // Ï¥àÍ∏∞Ìôî
            initializeProblemNav();
            loadProblem(0);
            updateProgress();
        }
        
        // Î¨∏Ï†ú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Ï¥àÍ∏∞Ìôî
        function initializeProblemNav() {
            const nav = document.getElementById('problemNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < Math.min(20, problemsData.problems.length); i++) {
                const button = document.createElement('button');
                button.className = 'nav-button';
                button.textContent = i + 1;
                button.onclick = () => {
                    if (i <= currentProblemIndex || problemsCompleted[i-1]) {
                        loadProblem(i);
                    }
                };
                nav.appendChild(button);
            }
        }
        
        // Î¨∏Ï†ú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÏóÖÎç∞Ïù¥Ìä∏
        function updateProblemNav() {
            const buttons = document.querySelectorAll('.nav-button');
            buttons.forEach((button, index) => {
                button.classList.remove('current', 'complete');
                if (index === currentProblemIndex) {
                    button.classList.add('current');
                } else if (problemsCompleted[index]) {
                    button.classList.add('complete');
                }
                
                // Ïù¥Ï†Ñ Î¨∏Ï†úÍ∞Ä ÏôÑÎ£åÎêòÏóàÍ±∞ÎÇò ÌòÑÏû¨/Ïù¥Ï†Ñ Î¨∏Ï†úÏù∏ Í≤ΩÏö∞Îßå ÌôúÏÑ±Ìôî
                button.disabled = !(index <= currentProblemIndex || (index > 0 && problemsCompleted[index-1]));
            });
        }
        
        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const currentProblemSpan = document.getElementById('currentProblem');
            const totalProblemsSpan = document.getElementById('totalProblems');
            
            const totalProblems = Math.min(20, problemsData.problems.length);
            const progress = ((currentProblemIndex + 1) / totalProblems) * 100;
            
            progressFill.style.width = progress + '%';
            currentProblemSpan.textContent = currentProblemIndex + 1;
            totalProblemsSpan.textContent = totalProblems;
        }
        
        // Ï†êÏàò ÏóÖÎç∞Ïù¥Ìä∏
        function updateScore() {
            document.getElementById('totalScore').textContent = totalScore;
        }
        
        // Î¨∏Ï†ú Î°úÎìú
        function loadProblem(index) {
            if (index >= problemsData.problems.length) {
                alert('Î™®Îì† Î¨∏Ï†úÎ•º ÏôÑÎ£åÌñàÏäµÎãàÎã§! Ï¥ù Ï†êÏàò: ' + totalScore + 'Ï†ê');
                return;
            }
            
            // Ï¥àÍ∏∞Ìôî
            resetProblemState();
            
            currentProblemIndex = index;
            currentProblemData = problemsData.problems[index];
            
            // Î¨∏Ï†ú Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            updateProblemDisplay();
            
            // ÏßÑÌñâ ÏÉÅÌô© ÏóÖÎç∞Ïù¥Ìä∏
            updateProgress();
            updateProblemNav();
            
            // ÏßàÎ¨∏ Í∞ÄÎä•Ìïú ÏöîÏÜåÎì§ Ï∂îÍ∞Ä (ÏïΩÍ∞ÑÏùò ÏßÄÏó∞)
            setTimeout(addQuestionableElements, 100);
        }
        
        // Î¨∏Ï†ú ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateProblemDisplay() {
            // Ï†úÎ™©
            document.getElementById('problemTitle').textContent = currentProblemData.title;
            
            // ÏÑ§Î™Ö (ÌïòÏù¥ÎùºÏù¥Ìä∏ ÌÉúÍ∑∏ Ï†ÅÏö©)
            let description = currentProblemData.problemInfo.description;
            currentProblemData.highlightTags.forEach(tag => {
                const regex = new RegExp(escapeRegExp(tag.text), 'g');
                description = description.replace(regex, `<span class="highlight-mark" data-insight="${tag.insightNumber}">${tag.text}</span>`);
            });
            document.getElementById('problemDescription').innerHTML = description;
            
            // Ï°∞Í±¥Îì§
            const conditionsArea = document.getElementById('conditionsArea');
            conditionsArea.innerHTML = '';
            
            currentProblemData.problemInfo.conditions.forEach(condition => {
                const div = document.createElement('div');
                div.className = 'equation';
                
                let conditionHtml = condition;
                // Ï°∞Í±¥ÏóêÎèÑ ÌïòÏù¥ÎùºÏù¥Ìä∏ ÌÉúÍ∑∏ Ï†ÅÏö©
                currentProblemData.highlightTags.forEach(tag => {
                    const regex = new RegExp(escapeRegExp(tag.text), 'g');
                    conditionHtml = conditionHtml.replace(regex, `<span class="highlight-mark" data-insight="${tag.insightNumber}">${tag.text}</span>`);
                });
                
                div.innerHTML = conditionHtml;
                conditionsArea.appendChild(div);
            });
        }
        
        // Î¨∏Ï†ú ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
        function resetProblemState() {
            currentStep = -1;
            isTyping = false;
            insightStep = 0;
            isInsightActive = false;
            
            // UI Ï¥àÍ∏∞Ìôî
            document.getElementById('explanationArea').innerHTML = '';
            document.getElementById('nextButton').innerHTML = '<span class="arrow-down"></span>';
            document.getElementById('nextButton').disabled = false;
            document.getElementById('nextButton').style.display = 'block';
            
            // Ïù∏ÏÇ¨Ïù¥Ìä∏ Ï¥àÍ∏∞Ìôî
            const insightButton = document.getElementById('insightButton');
            if (insightButton) {
                insightButton.textContent = 'Î¨∏Ï†ú Î∂ÑÏÑù ÏãúÏûë';
                insightButton.onclick = showInsight;
            }
            document.getElementById('insightList').innerHTML = '';
            
            // Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ ÏÑπÏÖò Ï¥àÍ∏∞Ìôî
            const creativeSection = document.getElementById('creativeSection');
            if (creativeSection) {
                creativeSection.classList.remove('active');
                document.getElementById('creativeQuestionsList').innerHTML = '';
            }
            
            // ÌôîÏù¥Ìä∏Î≥¥Îìú Ï¥àÍ∏∞Ìôî
            document.body.classList.remove('evaluation-mode');
            const whiteboardContainer = document.getElementById('whiteboardContainer');
            if (whiteboardContainer) {
                whiteboardContainer.classList.remove('active');
            }
            
            // Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº Ïà®Í∏∞Í∏∞
            const nextProblemButton = document.getElementById('nextProblemButton');
            if (nextProblemButton) {
                nextProblemButton.classList.remove('active');
            }
        }
        
        // Ï†ïÍ∑úÏãù Ïù¥Ïä§ÏºÄÏù¥ÌîÑ
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }
        
        // Ïú†ÏÇ¨Î¨∏Ï†ú Ìï¥ÏÑ§ ÏóÖÎç∞Ïù¥Ìä∏
        function updateSimilarProblemSolution() {
            const solutionContent = document.getElementById('solutionContent');
            solutionContent.innerHTML = '';
            
            currentProblemData.similarProblemSolution.steps.forEach(step => {
                const stepDiv = document.createElement('div');
                stepDiv.className = 'solution-step';
                
                const titleDiv = document.createElement('div');
                titleDiv.className = 'solution-step-title';
                titleDiv.textContent = step.title;
                
                const contentDiv = document.createElement('div');
                contentDiv.className = 'solution-step-content';
                contentDiv.innerHTML = step.content;
                
                stepDiv.appendChild(titleDiv);
                stepDiv.appendChild(contentDiv);
                solutionContent.appendChild(stepDiv);
            });
            
            const answerBox = document.createElement('div');
            answerBox.className = 'solution-answer-box';
            answerBox.textContent = currentProblemData.similarProblemSolution.finalAnswer;
            solutionContent.appendChild(answerBox);
        }
        
        // Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº ÌëúÏãú
        function showNextProblemButton() {
            const button = document.getElementById('nextProblemButton');
            if (button && currentProblemIndex < problemsData.problems.length - 1) {
                button.classList.add('active');
            }
        }
        
        // Îã§Ïùå Î¨∏Ï†úÎ°ú Ïù¥Îèô
        function nextProblem() {
            closeSolution();
            closeResultPopup();
            
            // ÌôîÏù¥Ìä∏Î≥¥Îìú Î™®Îìú Ìï¥Ï†ú
            document.body.classList.remove('evaluation-mode');
            document.getElementById('whiteboardContainer').classList.remove('active');
            
            // Îã§Ïùå Î¨∏Ï†ú Î≤ÑÌäº Ïà®Í∏∞Í∏∞
            document.getElementById('nextProblemButton').classList.remove('active');
            
            // Îã§Ïùå Î¨∏Ï†ú Î°úÎìú
            loadProblem(currentProblemIndex + 1);
        }
        
        window.nextProblem = nextProblem;
        
        // Ïù∏ÏÇ¨Ïù¥Ìä∏ Í¥ÄÎ†® Ìï®ÏàòÎì§
        function showInsight() {
            try {
                const button = document.getElementById('insightButton');
                const insightList = document.getElementById('insightList');
                
                if (!button || !insightList) {
                    console.error('Required elements not found');
                    return;
                }
                
                if (isInsightActive) {
                    // Ïù¥ÎØ∏ ÌôúÏÑ±ÌôîÎêú Í≤ΩÏö∞
                    return;
                }
                
                isInsightActive = true;
                button.textContent = 'Î∂ÑÏÑù Ï§ë...';
                button.disabled = true;
                
                insightStep = 0;
                insightList.innerHTML = '<div style="color: #999; font-size: 13px; text-align: center; padding: 20px;">Î¨∏Ï†ú Î∂ÑÏÑù Ï§ë<span style="display: inline-block; width: 20px; text-align: left;" class="loading-dots"></span></div>';
                
                // ÌïòÏù¥ÎùºÏù¥Ìä∏ Ï¥àÍ∏∞Ìôî
                document.querySelectorAll('.highlight-mark').forEach(el => {
                    if (el && el.classList) {
                        el.classList.remove('active');
                    }
                });
                
                // ÏàúÏ∞®Ï†ÅÏúºÎ°ú ÌïòÏù¥ÎùºÏù¥Ìä∏ ÌëúÏãú
                insightInterval = setInterval(() => {
                    insightStep++;
                    
                    const elements = document.querySelectorAll(`[data-insight="${insightStep}"]`);
                    elements.forEach(el => {
                        if (el && el.classList) {
                            el.classList.add('active');
                        }
                    });
                    
                    if (insightStep >= currentProblemData.analysisInfo.length) {
                        clearInterval(insightInterval);
                        setTimeout(() => {
                            insightList.innerHTML = '';
                            showInsightDescriptions();
                            button.textContent = 'Î∂ÑÏÑù ÏôÑÎ£å';
                        }, 500);
                    }
                }, 600);
            } catch (error) {
                console.error('Error in showInsight:', error);
            }
        }
        
        function showInsightDescriptions() {
            const insightList = document.getElementById('insightList');
            let descriptionIndex = 0;
            
            function addNextDescription() {
                if (descriptionIndex >= currentProblemData.analysisInfo.length) {
                    setTimeout(() => {
                        const completionDiv = document.createElement('div');
                        completionDiv.style.cssText = 'text-align: center; color: #4CAF50; font-size: 13px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #e9ecef;';
                        completionDiv.innerHTML = '‚úì Î∂ÑÏÑù ÏôÑÎ£å';
                        insightList.appendChild(completionDiv);
                    }, 300);
                    return;
                }
                
                const insightItem = document.createElement('div');
                insightItem.className = 'insight-item';
                insightItem.style.animationDelay = '0.1s';
                
                const numberSpan = document.createElement('span');
                numberSpan.className = 'insight-number';
                numberSpan.textContent = (descriptionIndex + 1).toString();
                
                const textSpan = document.createElement('span');
                textSpan.className = 'insight-text';
                
                insightItem.appendChild(numberSpan);
                insightItem.appendChild(textSpan);
                insightList.appendChild(insightItem);
                
                typeWriterSimple(textSpan, currentProblemData.analysisInfo[descriptionIndex], () => {
                    descriptionIndex++;
                    setTimeout(() => {
                        addNextDescription();
                    }, 600);
                });
            }
            
            addNextDescription();
        }
        
        function typeWriterSimple(element, text, callback) {
            let i = 0;
            element.innerHTML = '';
            if (element.classList) {
                element.classList.add('typing');
            }
            
            // HTML ÌÉúÍ∑∏Î•º Ï≤òÎ¶¨ÌïòÍ∏∞ ÏúÑÌïú ÏûÑÏãú div
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = text;
            const nodes = Array.from(tempDiv.childNodes);
            
            function typeNode(nodeIndex) {
                if (nodeIndex >= nodes.length) {
                    if (element.classList) {
                        element.classList.remove('typing');
                    }
                    if (callback) callback();
                    return;
                }
                
                const node = nodes[nodeIndex];
                
                if (node.nodeType === Node.TEXT_NODE) {
                    // ÌÖçÏä§Ìä∏ ÎÖ∏ÎìúÏù∏ Í≤ΩÏö∞
                    const text = node.textContent;
                    let charIndex = 0;
                    const textSpan = document.createElement('span');
                    element.appendChild(textSpan);
                    
                    function typeChar() {
                        if (charIndex < text.length) {
                            textSpan.textContent += text[charIndex];
                            charIndex++;
                            setTimeout(typeChar, 15);
                        } else {
                            typeNode(nodeIndex + 1);
                        }
                    }
                    typeChar();
                } else {
                    // ÏóòÎ¶¨Î®ºÌä∏ ÎÖ∏ÎìúÏù∏ Í≤ΩÏö∞ (Ïòà: <span class='highlight'>)
                    const clonedNode = node.cloneNode(true);
                    element.appendChild(clonedNode);
                    setTimeout(() => typeNode(nodeIndex + 1), 50);
                }
            }
            
            if (nodes.length > 0) {
                typeNode(0);
            } else {
                // Îã®Ïàú ÌÖçÏä§Ìä∏Ïù∏ Í≤ΩÏö∞
                let charIndex = 0;
                function type() {
                    if (charIndex < text.length) {
                        element.innerHTML += text.charAt(charIndex);
                        charIndex++;
                        setTimeout(type, 15);
                    } else {
                        if (element.classList) {
                            element.classList.remove('typing');
                        }
                        if (callback) callback();
                    }
                }
                type();
            }
        }
        
        function typeWriter(element, text, callback) {
            isTyping = true;
            let i = 0;
            element.innerHTML = '';
            if (element.classList) {
                element.classList.add('typing');
            }
            
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = text;
            const plainText = tempDiv.textContent;
            
            function type() {
                if (i < text.length) {
                    if (text[i] === '<') {
                        const tagEnd = text.indexOf('>', i);
                        const tag = text.substring(i, tagEnd + 1);
                        element.innerHTML = text.substring(0, tagEnd + 1);
                        i = tagEnd + 1;
                    } else {
                        element.innerHTML = text.substring(0, i + 1);
                        i++;
                    }
                    setTimeout(type, 30);
                } else {
                    if (element.classList) {
                        element.classList.remove('typing');
                    }
                    isTyping = false;
                    if (callback) callback();
                    
                    // ÌÉÄÏù¥ÌïëÏù¥ ÎÅùÎÇòÎ©¥ ÏßàÎ¨∏ Í∞ÄÎä•Ìïú ÏöîÏÜå Ï∂îÍ∞Ä
                    setTimeout(addQuestionableElements, 100);
                }
            }
            type();
        }
        
        // Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ Ïã§ÏãúÍ∞Ñ ÏÉùÏÑ± Ìï®Ïàò
        function generateCreativeQuestions(containerElement, questionsData) {
            // Ï¥àÍ∏∞ Î°úÎî© ÏÉÅÌÉú
            containerElement.innerHTML = `
                <div class="creative-loading">
                    <span class="creative-title">${questionsData.title}</span>
                    <div class="thinking-dots">
                        <span>AIÍ∞Ä Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ÏùÑ ÏÉùÏÑ±ÌïòÍ≥† ÏûàÏäµÎãàÎã§</span>
                        <span class="dots-animation">...</span>
                    </div>
                </div>
            `;
            
            containerElement.style.opacity = '1';
            containerElement.style.animation = 'fadeInUp 0.6s ease-out forwards';
            
            let questionIndex = 0;
            
            setTimeout(() => {
                // ÌÉÄÏù¥ÌãÄÎßå ÎÇ®Í∏∞Í≥† ÏßàÎ¨∏ ÏÉùÏÑ± ÏãúÏûë
                containerElement.innerHTML = `<span class="creative-title">${questionsData.title}</span>`;
                
                function addNextQuestion() {
                    if (questionIndex >= questionsData.questions.length) {
                        // Î™®Îì† ÏßàÎ¨∏ ÏÉùÏÑ± ÏôÑÎ£å ÌõÑ footer Ï∂îÍ∞Ä
                        setTimeout(() => {
                            const footerDiv = document.createElement('div');
                            footerDiv.className = 'creative-footer';
                            footerDiv.innerHTML = questionsData.footer;
                            footerDiv.style.opacity = '0';
                            footerDiv.style.animation = 'fadeIn 0.5s ease-out forwards';
                            containerElement.appendChild(footerDiv);
                        }, 500);
                        return;
                    }
                    
                    const question = questionsData.questions[questionIndex];
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'creative-question';
                    questionDiv.style.opacity = '0';
                    
                    // ÏûÑÏãú Î°úÎî© ÏÉÅÌÉú
                    questionDiv.innerHTML = `
                        <span class="q-number">Q${questionIndex + 1}.</span>
                        <span class="q-text generating">
                            <span class="generating-text">ÏßàÎ¨∏ ÏÉùÏÑ± Ï§ë</span>
                            <span class="generating-dots">...</span>
                        </span>
                    `;
                    
                    containerElement.appendChild(questionDiv);
                    
                    // Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë
                    setTimeout(() => {
                        questionDiv.style.animation = 'slideInLeft 0.5s ease-out forwards';
                    }, 10);
                    
                    // Ïã§Ï†ú ÏßàÎ¨∏ ÌÖçÏä§Ìä∏Î°ú ÍµêÏ≤¥
                    setTimeout(() => {
                        const qText = questionDiv.querySelector('.q-text');
                        qText.classList.remove('generating');
                        
                        // ÌÉÄÏù¥Ìïë Ìö®Í≥ºÎ°ú ÏßàÎ¨∏ ÌëúÏãú
                        typeWriterSimple(qText, question.text, () => {
                            // ÌûåÌä∏ Ï∂îÍ∞Ä
                            setTimeout(() => {
                                const hintDiv = document.createElement('div');
                                hintDiv.className = 'q-hint';
                                hintDiv.innerHTML = `üí° ÌûåÌä∏: ${question.hint}`;
                                hintDiv.style.opacity = '0';
                                hintDiv.style.animation = 'fadeIn 0.3s ease-out forwards';
                                questionDiv.appendChild(hintDiv);
                                
                                // Îã§Ïùå ÏßàÎ¨∏ÏúºÎ°ú
                                questionIndex++;
                                setTimeout(addNextQuestion, 800);
                            }, 300);
                        });
                    }, 1000);
                }
                
                // Ï≤´ ÏßàÎ¨∏ ÏãúÏûë
                addNextQuestion();
                
            }, 2000);
        }
        
        function showNextStep() {
            if (isTyping) return;
            
            if (autoNextTimeout) {
                clearTimeout(autoNextTimeout);
                autoNextTimeout = null;
            }
            
            currentStep++;
            
            // ÌïµÏã¨ Ìè¨Ïù∏Ìä∏ Ï†ïÎ¶¨Í∞Ä ÎÅùÎÇòÎ©¥ Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ ÌëúÏãú
            if (currentStep === currentProblemData.solutionSteps.length) {
                // Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ ÏÑπÏÖò ÌôúÏÑ±Ìôî
                const creativeSection = document.getElementById('creativeSection');
                const creativeContainer = document.getElementById('creativeQuestionsList');
                
                if (creativeSection && creativeContainer && currentProblemData.creativeQuestions) {
                    creativeSection.classList.add('active');
                    
                    // Ï∞ΩÏùòÏ†Å ÏßàÎ¨∏ Ïã§ÏãúÍ∞Ñ ÏÉùÏÑ±
                    generateCreativeQuestions(creativeContainer, currentProblemData.creativeQuestions);
                    
                    // Îã§Ïùå Î≤ÑÌäº ÌÖçÏä§Ìä∏ Î≥ÄÍ≤Ω
                    document.getElementById('nextButton').innerHTML = 'ÏÑúÏà†ÌèâÍ∞Ä ÏãúÏûëÌïòÍ∏∞';
                }
                return;
            } else if (currentStep > currentProblemData.solutionSteps.length) {
                // ÏÑúÏà†ÌèâÍ∞ÄÎ°ú Ï†ÑÌôò
                document.getElementById('nextButton').style.display = 'none';
                
                const transitionMessage = document.getElementById('transitionMessage');
                if (transitionMessage && transitionMessage.classList) {
                    transitionMessage.classList.add('active');
                }
                
                setTimeout(() => {
                    if (transitionMessage && transitionMessage.classList) {
                        transitionMessage.classList.remove('active');
                    }
                    
                    const mainContainer = document.querySelector('.main-container');
                    if (mainContainer) {
                        mainContainer.style.transition = 'opacity 0.5s ease';
                        mainContainer.style.opacity = '0';
                    }
                    
                    setTimeout(() => {
                        if (document.body && document.body.classList) {
                            document.body.classList.add('evaluation-mode');
                        }
                        
                        const whiteboardContainer = document.getElementById('whiteboardContainer');
                        if (whiteboardContainer && whiteboardContainer.classList) {
                            whiteboardContainer.classList.add('active');
                        }
                        initWhiteboard();
                    }, 500);
                }, 2000);
                
                return;
            }
            
            const step = currentProblemData.solutionSteps[currentStep];
            const explanationArea = document.getElementById('explanationArea');
            
            const stepDiv = document.createElement('div');
            stepDiv.className = 'explanation-step';
            
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.textContent = step.question;
            
            const answerDiv = document.createElement('div');
            answerDiv.className = 'answer';
            
            stepDiv.appendChild(questionDiv);
            stepDiv.appendChild(answerDiv);
            explanationArea.appendChild(stepDiv);
            
            setTimeout(() => {
                document.getElementById('solutionContainer').scrollTop = 
                    document.getElementById('solutionContainer').scrollHeight;
            }, 100);
            
            document.getElementById('nextButton').disabled = true;
            
            const thinkingSpan = document.createElement('span');
            thinkingSpan.className = 'thinking-indicator';
            thinkingSpan.textContent = 'ÏÉùÍ∞Å Ï§ë';
            questionDiv.appendChild(thinkingSpan);
            
            setTimeout(() => {
                thinkingSpan.remove();
                
                typeWriter(answerDiv, step.answer, () => {
                    document.getElementById('nextButton').disabled = false;
                });
            }, 3000);
        }
        
        // ÌôîÏù¥Ìä∏Î≥¥Îìú Ï¥àÍ∏∞Ìôî Ìï®Ïàò
        function initWhiteboard() {
            // Ïú†ÏÇ¨Î¨∏Ï†ú Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('similarProblemText').textContent = currentProblemData.similarProblem.description;
            
            // ÎãµÏïà ÏÑ†ÌÉù ÏòµÏÖò ÏóÖÎç∞Ïù¥Ìä∏
            const answerSelect = document.getElementById('answerSelect');
            answerSelect.innerHTML = '<option value="">ÎãµÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>';
            
            currentProblemData.similarProblem.options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option.value;
                optionElement.textContent = option.text;
                answerSelect.appendChild(optionElement);
            });
            
            const canvas = document.getElementById('whiteboardCanvas');
            const ctx = canvas.getContext('2d');
            const canvasWrapper = document.querySelector('.canvas-wrapper');
            
            function resizeCanvas() {
                canvas.width = canvasWrapper.offsetWidth;
                canvas.height = canvasWrapper.offsetHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            let isDrawing = false;
            let currentTool = 'pen';
            let currentColor = '#000000';
            let currentThickness = 2;
            
            document.getElementById('penTool').addEventListener('click', function() {
                currentTool = 'pen';
                updateToolButtons();
                canvas.style.cursor = 'crosshair';
            });
            
            document.getElementById('eraserTool').addEventListener('click', function() {
                currentTool = 'eraser';
                updateToolButtons();
                canvas.style.cursor = 'grab';
            });
            
            document.getElementById('clearTool').addEventListener('click', function() {
                if (confirm('ÌôîÏù¥Ìä∏Î≥¥ÎìúÎ•º Î™®Îëê ÏßÄÏö∞ÏãúÍ≤†ÏäµÎãàÍπå?')) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            });
            
            document.getElementById('colorPicker').addEventListener('change', function(e) {
                currentColor = e.target.value;
            });
            
            document.getElementById('thicknessSlider').addEventListener('input', function(e) {
                currentThickness = e.target.value;
                document.getElementById('thicknessValue').textContent = currentThickness;
            });
            
            function updateToolButtons() {
                document.querySelectorAll('.tool-button').forEach(btn => {
                    if (btn && btn.classList) {
                        btn.classList.remove('active');
                    }
                });
                
                if (currentTool === 'pen') {
                    const penTool = document.getElementById('penTool');
                    if (penTool && penTool.classList) {
                        penTool.classList.add('active');
                    }
                } else if (currentTool === 'eraser') {
                    const eraserTool = document.getElementById('eraserTool');
                    if (eraserTool && eraserTool.classList) {
                        eraserTool.classList.add('active');
                    }
                }
            }
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);
            
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(x, y);
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                ctx.lineWidth = currentThickness;
                ctx.lineCap = 'round';
                
                if (currentTool === 'pen') {
                    ctx.globalCompositeOperation = 'source-over';
                    ctx.strokeStyle = currentColor;
                } else if (currentTool === 'eraser') {
                    ctx.globalCompositeOperation = 'destination-out';
                    ctx.lineWidth = currentThickness * 3;
                }
                
                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x, y);
            }
            
            function stopDrawing() {
                if (isDrawing) {
                    isDrawing = false;
                    ctx.beginPath();
                }
            }
            
            function handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                                e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }
            
            const submitBtn = document.getElementById('submitButton');
            if (submitBtn) {
                submitBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const answerSelect = document.getElementById('answerSelect');
                    if (!answerSelect) {
                        alert('ÎãµÏïà ÏÑ†ÌÉù ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                        return;
                    }
                    
                    const selectedAnswer = answerSelect.value;
                    
                    if (!selectedAnswer || selectedAnswer === '') {
                        alert('ÎãµÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                        return;
                    }
                    
                    if (typeof window.checkAnswer === 'function') {
                        window.checkAnswer(parseInt(selectedAnswer));
                    } else {
                        alert('Ï±ÑÏ†ê Í∏∞Îä•Ïóê Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
                    }
                });
            }
            
            const closeBtn = document.getElementById('closeButton');
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    if (confirm('ÏÑúÏà†ÌèâÍ∞ÄÎ•º Ï¢ÖÎ£åÌïòÏãúÍ≤†ÏäµÎãàÍπå?\n\nÏûëÏÑ±Ìïú ÎÇ¥Ïö©Ïù¥ Ï†ÄÏû•ÎêòÏßÄ ÏïäÏäµÎãàÎã§.')) {
                        location.reload();
                    }
                });
            }
        }
        
        // DOMContentLoaded Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        document.addEventListener('DOMContentLoaded', function() {
            const insightButton = document.getElementById('insightButton');
            if (insightButton) {
                insightButton.addEventListener('click', showInsight);
            }
            
            const nextButton = document.getElementById('nextButton');
            if (nextButton) {
                nextButton.addEventListener('click', showNextStep);
            }
            
            document.addEventListener('click', function(e) {
                if (e.target && e.target.id === 'resultOverlay') {
                    closeResultPopup();
                } else if (e.target && e.target.id === 'solutionOverlay') {
                    closeSolution();
                }
            });
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const solutionPopup = document.getElementById('solutionPopup');
                    const resultPopup = document.getElementById('resultPopup');
                    
                    if (solutionPopup && solutionPopup.classList && solutionPopup.classList.contains('active')) {
                        closeSolution();
                    } else if (resultPopup && resultPopup.classList && resultPopup.classList.contains('active')) {
                        closeResultPopup();
                    }
                }
            });
            
            // Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            loadProblemsData();
        });
    </script>
</body>
</html>